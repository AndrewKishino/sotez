!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(global,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){t(1),e.exports=t(2)},function(e,n){e.exports=require("@babel/polyfill")},function(e,n,t){function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,n,t,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,i)}function a(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var a=e.apply(n,t);function c(e){o(a,r,i,c,s,"next",e)}function s(e){o(a,r,i,c,s,"throw",e)}c(void 0)})}}var c=t(3),s=t(4),u=t(5),d=t(6),p=t(7),f=t(8),g=t(9).default,h=t(10).default,l={},y={tz1:new Uint8Array([6,161,159]),tz2:new Uint8Array([6,161,161]),tz3:new Uint8Array([6,161,164]),KT:new Uint8Array([2,90,121]),edpk:new Uint8Array([13,15,37,217]),edsk2:new Uint8Array([13,15,58,7]),spsk:new Uint8Array([17,162,224,201]),p2sk:new Uint8Array([16,81,238,189]),sppk:new Uint8Array([3,254,226,86]),p2pk:new Uint8Array([3,178,139,127]),edesk:new Uint8Array([7,90,60,179,41]),edsk:new Uint8Array([43,246,78,7]),edsig:new Uint8Array([9,245,205,134,18]),spsig1:new Uint8Array([13,115,101,19,63]),p2sig:new Uint8Array([54,240,44,52]),sig:new Uint8Array([4,130,43]),Net:new Uint8Array([87,82,0]),nce:new Uint8Array([69,220,169]),b:new Uint8Array([1,52]),o:new Uint8Array([5,116]),Lo:new Uint8Array([133,233]),LLo:new Uint8Array([29,159,109]),P:new Uint8Array([2,170]),Co:new Uint8Array([79,179]),id:new Uint8Array([153,103])},m={block:new Uint8Array([1]),endorsement:new Uint8Array([2]),generic:new Uint8Array([3])},b={b582int:function(e){for(var n=new f(0),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",r=0;r<e.length;r++)n=n.plus(new f(t.indexOf(e[e.length-1-r]).multipliedBy(new f(t.length).exponentiatedBy(r))));return n.toString(16)},totez:function(e){return parseInt(e,10)/1e6},mutez:function(e){return new f(new f(e).toFixed(6)).multipliedBy(1e6).toString()},b58cencode:function(e,n){var t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),s.encode(Buffer.from(t,"hex"))},b58cdecode:function(e,n){return s.decode(e).slice(n.length)},buf2hex:function(e){var n=new Uint8Array(e),t=[];return n.forEach(function(e){var n=e.toString(16),r="00".concat(n).slice(-2);t.push(r)}),t.join("")},hex2buf:function(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)}))},hexNonce:function(e){for(var n="";e--;)n+="0123456789abcedf"[16*Math.random()|0];return n},mergebuf:function(e,n){var t=new Uint8Array(e.length+n.length);return t.set(e),t.set(n,e.length),t},sexp2mic:function e(n){"("===(n=n.replace(/(?:@[a-z_]+)|(?:#.*$)/gm,"").replace(/\s+/g," ").trim()).charAt(0)&&(n=n.slice(1,-1));for(var t=0,r=!1,i=!1,o={prim:"",args:[]},a="",c=0;c<n.length;c++)if(i)a+=n[c],i=!1;else if(c===n.length-1&&!1===r||" "===n[c]&&0===t&&!1===r){if(c===n.length-1&&(a+=n[c]),a){if(a===parseInt(a,10).toString()){if(!o.prim)return{int:a};o.args.push({int:a})}else if("0"===a[0]){if(!o.prim)return{bytes:a};o.args.push({bytes:a})}else o.prim?o.args.push(e(a)):o.prim=a;a=""}}else if('"'===n[c]&&r){if(r=!1,!o.prim)return{string:a};o.args.push({string:a}),a=""}else'"'!==n[c]||r||0!==t?("\\"===n[c]?i=!0:"("===n[c]?t++:")"===n[c]&&t--,a+=n[c]):r=!0;return o},mic2arr:function e(n){var t=[];if(Object.prototype.hasOwnProperty.call(n,"prim"))"Pair"===n.prim?(t.push(e(n.args[0])),t=t.concat(e(n.args[1]))):"Elt"===n.prim?t={key:e(n.args[0]),val:e(n.args[1])}:"True"===n.prim?t=!0:"False"===n.prim&&(t=!1);else if(Array.isArray(n))for(var r=n.length,i=0;i<r;i++){var o=e(n[i]);void 0!==o.key?(Array.isArray(t)&&(t={keys:[],vals:[]}),t.keys.push(o.key),t.vals.push(o.val)):t.push(o)}else t=Object.prototype.hasOwnProperty.call(n,"string")?n.string:Object.prototype.hasOwnProperty.call(n,"int")?parseInt(n.int,10):n;return t},ml2mic:function e(n){for(var t=[],r=!1,i="",o="",a=0,c=0,s=!1,u=!1,d=0;d<n.length;d++){if("}"!==o&&";"!==o||(o=""),r){if("}"===n[d]?c--:"{"===n[d]&&c++,0===c){var p=e(o);t.push({prim:i.trim(),args:[p]}),o="",c=0,r=!1}}else{if("{"===n[d]){c++,i=o,o="",r=!0;continue}if(u){o+=n[d],u=!1;continue}if(d===n.length-1&&!1===s||";"===n[d]&&0===a&&!1===s){if(d===n.length-1&&(o+=n[d]),""===o.trim()||"}"===o.trim()||";"===o.trim()){o="";continue}t.push(b.ml2tzjson(o)),o="";continue}'"'===n[d]&&s?s=!1:'"'!==n[d]||s?"\\"===n[d]?u=!0:"("===n[d]?a++:")"===n[d]&&a--:s=!0}o+=n[d]}return t},formatMoney:function(e,n,t,r){var i=isNaN(n=Math.abs(n))?2:n,o=void 0===t?".":t,a=void 0===r?",":r,c=e<0?"-":"",s=String(parseInt(e=Math.abs(Number(e)||0).toFixed(i),10)),u=s.length>3?s.length%3:0;return c+(u?s.substr(0,u)+a:"")+s.substr(u).replace(/(\d{3})(?=\d)/g,"$1".concat(a))+(i?o+Math.abs(e-s).toFixed(n).slice(2):"")}},v={extractKeys:function(e){switch(e.substr(0,4)){case"edsk":if(98===e.length)return{pk:b.b58cencode(b.b58cdecode(e,y.edsk).slice(32),y.edpk),pkh:b.b58cencode(u.crypto_generichash(20,b.b58cdecode(e,y.edsk).slice(32)),y.tz1),sk:e};if(54===e.length){var n=b.b58cdecode(e,y.edsk2),t=u.crypto_sign_seed_keypair(n);return{sk:b.b58cencode(t.privateKey,y.edsk),pk:b.b58cencode(t.publicKey,y.edpk),pkh:b.b58cencode(u.crypto_generichash(20,t.publicKey),y.tz1)}}break;default:return!1}},generateMnemonic:function(){return d.generateMnemonic(160)},checkAddress:function(e){try{return b.b58cdecode(e,y.tz1),!0}catch(e){return!1}},generateKeysNoSeed:function(){var e=u.crypto_sign_keypair();return{sk:b.b58cencode(e.privateKey,y.edsk),pk:b.b58cencode(e.publicKey,y.edpk),pkh:b.b58cencode(u.crypto_generichash(20,e.publicKey),y.tz1)}},generateKeys:function(e,n){var t=d.mnemonicToSeed(e,n).slice(0,32),r=u.crypto_sign_seed_keypair(t);return{mnemonic:e,passphrase:n,sk:b.b58cencode(r.privateKey,y.edsk),pk:b.b58cencode(r.publicKey,y.edpk),pkh:b.b58cencode(u.crypto_generichash(20,r.publicKey),y.tz1)}},generateKeysFromSeedMulti:function(e,n,t){t/=258;var r=d.mnemonicToSeed(e,p.pbkdf2Sync(n,t.toString(36).slice(2),0,32,"sha512").toString()).slice(0,32),i=u.crypto_sign_seed_keypair(r);return{mnemonic:e,passphrase:n,n:t,sk:b.b58cencode(i.privateKey,y.edsk),pk:b.b58cencode(i.publicKey,y.edpk),pkh:b.b58cencode(u.crypto_generichash(20,i.publicKey),y.tz1)}},sign:function(e,n,t){var r=b.hex2buf(e);void 0!==t&&(r=b.mergebuf(t,r));var i=u.crypto_sign_detached(u.crypto_generichash(32,r),b.b58cdecode(n,y.edsk),"uint8array");return{bytes:e,sig:i,edsig:b.b58cencode(i,y.edsig),sbytes:e+b.buf2hex(i)}},verify:function(e,n,t){return u.crypto_sign_verify_detached(n,b.hex2buf(e),b.b58cdecode(t,y.edpk))}},k={activeProvider:"http://127.0.0.1:8732",debugMode:!1,async:!0,isZeronet:!1,setDebugMode:function(e){k.debugMode=e},setProvider:function(e,n){void 0!==n&&(k.isZeronet=n),k.activeProvider=e},resetProvider:function(){k.activeProvider="http://127.0.0.1:8732"},query:function(e,n,t){return void 0===n?void 0===t?t="GET":n={}:void 0===t&&(t="POST"),new Promise(function(r,i){try{var o=new c;o.open(t,k.activeProvider+e,k.async),o.onload=function(){if(k.debugMode&&console.log(e,n,o.responseText),200===o.status)if(o.responseText){var t=JSON.parse(o.responseText);void 0!==t.error?i(t.error):(void 0!==t.ok&&(t=t.ok),r(t))}else i("Empty response returned");else o.responseText?i(o.responseText):i(o.statusText)},o.onerror=function(){i(o.statusText)},"POST"===t?(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(n))):o.send()}catch(e){i(e)}})}},x={getAddress:function(){var e=a(regeneratorRuntime.mark(function e(n){var t,r,i,o,a,c,s,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.path,r=void 0===t?"44'/1729'/0'/0'":t,i=n.displayConfirm,o=void 0!==i&&i,a=n.curve,c=void 0===a?0:a,e.next=3,g.create();case 3:return s=e.sent,u=new h(s),e.next=7,u.getAddress(r,o,c);case 7:return d=e.sent,s.close(),e.abrupt("return",d);case 10:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),signOperation:function(){var e=a(regeneratorRuntime.mark(function e(n){var t,r,i,o,a,c,s,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.path,r=void 0===t?"44'/1729'/0'/0'":t,i=n.rawTxHex,o=n.curve,a=void 0===o?0:o,e.next=3,g.create();case 3:return c=e.sent,s=new h(c),e.next=7,s.signOperation(r,"03".concat(i),a);case 7:return u=e.sent,d=u.signature,c.close(),e.abrupt("return",{signature:d});case 11:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),getVersion:function(){var e=a(regeneratorRuntime.mark(function e(){var n,t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.create();case 2:return n=e.sent,t=new h(n),e.next=6,t.getVersion();case 6:return r=e.sent,n.close(),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},w={account:function(){var e=a(regeneratorRuntime.mark(function e(n,t){var r,i,o,a,c,s,u,d,p,f,g,h,l,y,m,v,_,A,U,O,L;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.keys,i=n.amount,o=n.spendable,a=n.delegatable,c=n.delegate,s=n.fee,u=void 0===s?"1278":s,d=n.gasLimit,p=void 0===d?"10000":d,f=n.storageLimit,g=void 0===f?"257":f,h=t.useLedger,l=void 0!==h&&h,y=t.path,m=void 0===y?"44'/1729'/0'/0'":y,v=t.curve,_=void 0===v?0:v,A=r&&r.pkh,!l){e.next=9;break}return e.next=6,x.getAddress({path:m,curve:_});case 6:U=e.sent,O=U.address,A=O;case 9:return L={kind:"origination",balance:"".concat(b.mutez(i)),fee:"".concat(u),gas_limit:p,storage_limit:g},k.isZeronet?L.manager_pubkey=A:L.managerPubkey=A,void 0!==o&&(L.spendable=o),void 0!==a&&(L.delegatable=a),void 0!==c&&c&&(L.delegate=c),e.abrupt("return",w.sendOperation({from:A,operation:L,keys:r},{useLedger:l,path:m,curve:_}));case 15:case"end":return e.stop()}},e,this)}));return function(n,t){return e.apply(this,arguments)}}(),getBalance:function(e){return k.query("/chains/main/blocks/head/context/contracts/".concat(e,"/balance")).then(function(e){return e})},getDelegate:function(e){return k.query("/chains/main/blocks/head/context/contracts/".concat(e,"/delegate")).then(function(e){return e||!1}).catch(function(){return!1})},getHead:function(){return k.query("/chains/main/blocks/head")},getHeadHash:function(){return k.query("/chains/main/blocks/head/hash")},call:function(e,n){return k.query(e,n)},sendOperation:function(e,n){var t,o,c,s,u=e.from,d=e.operation,p=e.keys,f=void 0!==p&&p,g=e.skipPrevalidation,h=void 0!==g&&g,y=n.useLedger,b=void 0!==y&&y,_=n.path,A=void 0===_?"44'/1729'/0'/0'":_,U=n.curve,O=void 0===U?0:U,L=[],S=!1,P=[];L.push(k.query("/chains/main/blocks/head/header")),P=Array.isArray(d)?i(d):[d];for(var q=0;q<P.length;q++)if(["transaction","origination","delegation"].includes(P[q].kind)){S=!0,L.push(k.query("/chains/main/blocks/head/context/contracts/".concat(u,"/counter"))),L.push(k.query("/chains/main/blocks/head/context/contracts/".concat(u,"/manager_key")));break}return Promise.all(L).then(function(){var e=a(regeneratorRuntime.mark(function e(n){var i,o,a,d,p,g,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r(n,3),o=i[0],a=i[1],d=i[2],s=o,!S||!f&&!b||void 0!==d.key){e.next=9;break}if(!b){e.next=8;break}return e.next=6,x.getAddress({path:A,curve:O});case 6:g=e.sent,p=g.publicKey;case 8:P.unshift({kind:"reveal",fee:k.isZeronet?"100000":"1269",public_key:p||f.pk,source:u,gas_limit:"10000",storage_limit:"0"});case 9:return t=parseInt(a,10),l[u]=t,h=function(){return P.map(function(e){return["proposals","ballot","transaction","origination","delegation"].includes(e.kind)&&void 0===e.source&&(e.source=u),["reveal","transaction","origination","delegation"].includes(e.kind)&&(void 0===e.gas_limit&&(e.gas_limit="0"),void 0===e.storage_limit&&(e.storage_limit="0"),e.counter="".concat(++l[u]),e.fee="".concat(e.fee),e.gas_limit="".concat(e.gas_limit),e.storage_limit="".concat(e.storage_limit)),JSON.stringify(e)}).map(function(e){return JSON.parse(e)})},c={branch:s.hash,contents:h()},e.abrupt("return",k.query("/chains/".concat(s.chain_id,"/blocks/").concat(s.hash,"/helpers/forge/operations"),c));case 14:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}()).then(function(){var e=a(regeneratorRuntime.mark(function e(n){var t,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=8;break}return e.next=3,x.signOperation({path:A,rawTxHex:n,curve:O});case 3:t=e.sent,r=t.signature,o="".concat(n).concat(r),e.next=14;break;case 8:if(!1!==f.sk){e.next=13;break}return c.protocol=s.protocol,e.abrupt("return",{opOb:c,opbytes:n});case 13:f?(i=v.sign(n,f.sk,m.generic),o=i.sbytes,c.signature=i.edsig):(o="".concat(n,"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"),c.signature="edsigtXomBKi5CTRf5cjATJWSyaRvhfYNHqSUGrn4SdbYRcGwQrUGjzEfQDTuqHhuA8b2d8NarZjz8TRf65WkpQmo423BtomS8Q");case 14:if(c.protocol=s.protocol,!h&&!b){e.next=17;break}return e.abrupt("return",w.silentInject(o));case 17:return e.abrupt("return",w.inject(c,o));case 18:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}())},inject:function(e,n){var t=[],r=[];return k.query("/chains/main/blocks/head/helpers/preapply/operations",[e]).then(function(e){if(!Array.isArray(e))throw new Error({error:"RPC Fail",errors:[]});for(var i=0;i<e.length;i++)for(var o=0;o<e[i].contents.length;o++)t.push(e[i].contents[o]),void 0!==e[i].contents[o].metadata.operation_result&&"failed"===e[i].contents[o].metadata.operation_result.status&&(r=r.concat(e[i].contents[o].metadata.operation_result.errors));if(r.length)throw new Error({error:"Operation Failed",errors:r});return k.query("/injection/operation",n)}).then(function(e){return{hash:e,operations:t}})},silentInject:function(e){return k.query("/injection/operation",e).then(function(e){return{hash:e}})},transfer:function(e){var n=e.from,t=e.keys,r=e.to,i=e.amount,o=e.fee,a=void 0===o?"1278":o,c=e.parameter,s=void 0!==c&&c,u=e.gasLimit,d=void 0===u?"10100":u,p=e.storageLimit,f=void 0===p?"0":p,g=e.mutez,h=void 0!==g&&g,l=e.rawParam,y=void 0!==l&&l,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=m.useLedger,k=void 0!==v&&v,x=m.path,_=void 0===x?"44'/1729'/0'/0'":x,A=m.curve,U=void 0===A?0:A,O={kind:"transaction",fee:"".concat(a),gas_limit:d,storage_limit:f,amount:h?i:"".concat(b.mutez(i)),destination:r};return s&&(O.parameters=y?s:b.sexp2mic(s)),w.sendOperation({from:n,operation:O,keys:t},{useLedger:k,path:_,curve:U})},activate:function(e,n){var t={kind:"activate_account",pkh:e.pkh,secret:n};return w.sendOperation({from:e.pkh,operation:t,keys:e})},originate:function(){var e=a(regeneratorRuntime.mark(function e(n){var t,r,i,o,a,c,s,u,d,p,f,g,h,l,y,m,v,_,A,U,O,L,S,P,q,z,T,R,j=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.keys,r=n.amount,i=n.code,o=n.init,a=n.spendable,c=void 0!==a&&a,s=n.delegatable,u=void 0!==s&&s,d=n.delegate,p=n.fee,f=void 0===p?"1278":p,g=n.gasLimit,h=void 0===g?"10000":g,l=n.storageLimit,y=void 0===l?"257":l,m=j.length>1&&void 0!==j[1]?j[1]:{},v=m.useLedger,_=void 0!==v&&v,A=m.path,U=void 0===A?"44'/1729'/0'/0'":A,O=m.curve,L=void 0===O?0:O,S=b.ml2mic(i),P={code:S,storage:b.sexp2mic(o)},q=t&&t.pkh,!_){e.next=11;break}return e.next=8,x.getAddress({path:U,curve:L});case 8:z=e.sent,T=z.address,q=T;case 11:return R={kind:"origination",fee:"".concat(f),storage_limit:y,gas_limit:h,balance:"".concat(b.mutez(r)),spendable:c,delegatable:u,delegate:void 0!==d&&d?d:q,script:P},k.isZeronet?R.manager_pubkey=q:R.managerPubkey=q,e.abrupt("return",w.sendOperation({from:q,operation:R,keys:t},{useLedger:_,path:U,curve:L}));case 14:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),setDelegate:function(){var e=a(regeneratorRuntime.mark(function e(n){var t,r,i,o,a,c,s,u,d,p,f,g,h,l,y,m,b,v,k,_,A=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.from,r=n.keys,i=n.delegate,o=n.fee,a=void 0===o?"1278":o,c=n.gasLimit,s=void 0===c?"10000":c,u=n.storageLimit,d=void 0===u?"0":u,p=A.length>1&&void 0!==A[1]?A[1]:{},f=p.useLedger,g=void 0!==f&&f,h=p.path,l=void 0===h?"44'/1729'/0'/0'":h,y=p.curve,m=void 0===y?0:y,b=r&&r.pkh,!g){e.next=9;break}return e.next=6,x.getAddress({path:l,curve:m});case 6:v=e.sent,k=v.address,b=k;case 9:return _={kind:"delegation",fee:"".concat(a),gas_limit:s,storage_limit:d,delegate:void 0!==i?i:b},e.abrupt("return",w.sendOperation({from:t,operation:_,keys:r},{useLedger:g,path:l,curve:m}));case 11:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),registerDelegate:function(){var e=a(regeneratorRuntime.mark(function e(n){var t,r,i,o,a,c,s,u,d,p,f,g,h,l,y,m,b,v,k=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.keys,r=n.fee,i=void 0===r?"1278":r,o=n.gasLimit,a=void 0===o?"10000":o,c=n.storageLimit,s=void 0===c?"0":c,u=k.length>1&&void 0!==k[1]?k[1]:{},d=u.useLedger,p=void 0!==d&&d,f=u.path,g=void 0===f?"44'/1729'/0'/0'":f,h=u.curve,l=void 0===h?0:h,y=t&&t.pkh,!p){e.next=9;break}return e.next=6,x.getAddress({path:g,curve:l});case 6:m=e.sent,b=m.address,y=b;case 9:return v={kind:"delegation",fee:"".concat(i),gas_limit:a,storage_limit:s,delegate:y},e.abrupt("return",w.sendOperation({from:y,operation:v,keys:t},{useLedger:p,path:g,curve:l}));case 11:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),typecheckCode:function(e){var n=b.ml2mic(e);return k.query("/chains/main/blocks/head/helpers/scripts/typecheck_code",{program:n,gas:"10000"})},packData:function(e,n){var t={data:b.sexp2mic(e),type:b.sexp2mic(n),gas:"4000000"};return k.query("/chains/main/blocks/head/helpers/scripts/pack_data",t)},typecheckData:function(e,n){var t={data:b.sexp2mic(e),type:b.sexp2mic(n),gas:"4000000"};return k.query("/chains/main/blocks/head/helpers/scripts/typecheck_data",t)},runCode:function(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?"trace_code":"run_code";return k.query("/chains/main/blocks/head/helpers/scripts/".concat(i),{script:b.ml2mic(e),amount:"".concat(b.mutez(n)),input:b.sexp2mic(t),storage:b.sexp2mic(r)})}},_={hash:function(e,n){for(var t=b.b58cdecode(e,y.o),r=[],i=0;i<t.length;i++)r.push(t[i]);return r=r.concat([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n]),b.b58cencode(u.crypto_generichash(20,new Uint8Array(r)),y.KT)},originate:function(e){var n=e.keys,t=e.amount,r=e.code,i=e.init,o=e.spendable,a=e.delegatable,c=e.delegate,s=e.fee,u=void 0===s?"1278":s,d=e.gasLimit,p=void 0===d?"10000":d,f=e.storageLimit,g=void 0===f?"10000":f;return w.originate({keys:n,amount:t,code:r,init:i,spendable:o,delegatable:a,delegate:c,fee:u,gasLimit:p,storageLimit:g})},storage:function(e){return new Promise(function(n,t){return k.query("/chains/main/blocks/head/context/contracts/".concat(e,"/storage")).then(function(e){return n(e)}).catch(function(e){return t(e)})})},load:function(e){return k.query("/chains/main/blocks/head/context/contracts/".concat(e))},watch:function(e,n,t){var r=[],i=function(){_.storage(e).then(function(e){JSON.stringify(r)!==JSON.stringify(e)&&t(r=e)})};return i(),setInterval(i,1e3*n)},send:function(e){var n=e.to,t=e.from,r=e.keys,i=e.amount,o=e.parameter,a=e.fee,c=void 0===a?"1278":a,s=e.gasLimit,u=void 0===s?"2000":s,d=e.storageLimit,p=void 0===d?"0":d,f=e.mutez,g=void 0!==f&&f,h=e.rawParam,l=void 0!==h&&h,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=y.useLedger,b=void 0!==m&&m,v=y.path,k=void 0===v?"44'/1729'/0'/0'":v,x=y.curve,_=void 0===x?0:x;return w.transfer({from:t,keys:r,to:n,amount:i,fee:c,parameter:o,gasLimit:u,storageLimit:p,mutez:g,rawParam:l},{useLedger:b,path:k,curve:_})}};b.ml2tzjson=b.sexp2mic,b.tzjson2arr=b.mic2arr,b.mlraw2json=b.ml2mic,b.mintotz=b.totez,b.tztomin=b.mutez,y.TZ=new Uint8Array([2,90,121]);var A={utility:b,crypto:v,node:k,rpc:w,contract:_,ledger:x};e.exports=A},function(e,n){e.exports=require("xhr2")},function(e,n){e.exports=require("bs58check")},function(e,n){e.exports=require("libsodium-wrappers")},function(e,n){e.exports=require("bip39")},function(e,n){e.exports=require("pbkdf2")},function(e,n){e.exports=require("bignumber.js")},function(e,n){e.exports=require("@ledgerhq/hw-transport-node-hid")},function(e,n){e.exports=require("@ledgerhq/hw-app-xtz")}])});