!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(6);"undefined"==typeof Buffer&&(Buffer=r(14));var o={textEncode:function(e){return new Uint8Array(Buffer.from(e,"utf8"))},textDecode:function(e){return Buffer.from(e).toString("utf8")},b582int:function(e){for(var t=new i.BigNumber(0),r="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",n=0;n<e.length;n++)t=t.plus(new i.BigNumber(r.indexOf(e[e.length-1-n])).multipliedBy(new i.BigNumber(r.length).exponentiatedBy(n)));return t.toString(16)},totez:function(e){if("number"==typeof e)return e/1e6;if("string"==typeof e)return parseInt(e,10)/1e6;throw new TypeError('Invalid parameter for "mutez" provided.')},mutez:function(e){return new i.BigNumber(new i.BigNumber(e).toFixed(6)).multipliedBy(1e6).toString()},b58cencode:function(e,t){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),n.default.encode(Buffer.from(r,"hex"))},b58cdecode:function(e,t){return n.default.decode(e).slice(t.length)},buf2hex:function(e){var t=new Uint8Array(e),r=[];return t.forEach(function(e){var t=("00"+e.toString(16)).slice(-2);r.push(t)}),r.join("")},hex2buf:function(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)}))},hexNonce:function(e){for(var t="";e--;)t+="0123456789abcedf"[16*Math.random()|0];return t},mergebuf:function(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r},sexp2mic:function e(t){"("===(t=t.replace(/(?:@[a-z_]+)|(?:#.*$)/gm,"").replace(/\s+/g," ").trim()).charAt(0)&&(t=t.slice(1,-1));for(var r=0,n=!1,i=!1,o={prim:"",args:[]},a="",s=0;s<t.length;s++)if(i)a+=t[s],i=!1;else if(s===t.length-1&&!1===n||" "===t[s]&&0===r&&!1===n){if(s===t.length-1&&(a+=t[s]),a){if(a===parseInt(a,10).toString()){if(!o.prim)return{int:a};o.args.push({int:a})}else if("0"===a[0]){if(!o.prim)return{bytes:a};o.args.push({bytes:a})}else o.prim?o.args.push(e(a)):o.prim=a;a=""}}else if('"'===t[s]&&n){if(n=!1,!o.prim)return{string:a};o.args.push({string:a}),a=""}else'"'!==t[s]||n||0!==r?("\\"===t[s]?i=!0:"("===t[s]?r++:")"===t[s]&&r--,a+=t[s]):n=!0;return o},mic2arr:function e(t){var r=[];if(Object.prototype.hasOwnProperty.call(t,"prim"))"Pair"===t.prim?(r.push(e(t.args[0])),r=r.concat(e(t.args[1]))):"Elt"===t.prim?r={key:e(t.args[0]),val:e(t.args[1])}:"True"===t.prim?r=!0:"False"===t.prim&&(r=!1);else if(Array.isArray(t))for(var n=t.length,i=0;i<n;i++){var o=e(t[i]);void 0!==o.key?(Array.isArray(r)&&(r={keys:[],vals:[]}),r.keys.push(o.key),r.vals.push(o.val)):r.push(o)}else r=Object.prototype.hasOwnProperty.call(t,"string")?t.string:Object.prototype.hasOwnProperty.call(t,"int")?parseInt(t.int,10):t;return r},ml2mic:function e(t){for(var r=[],n=!1,i="",a="",s=0,u=0,c=!1,f=!1,l=0;l<t.length;l++){if("}"!==a&&";"!==a||(a=""),n){if("}"===t[l]?u--:"{"===t[l]&&u++,0===u){var p=e(a);r.push({prim:i.trim(),args:[p]}),a="",u=0,n=!1}}else{if("{"===t[l]){u++,i=a,a="",n=!0;continue}if(f){a+=t[l],f=!1;continue}if(l===t.length-1&&!1===c||";"===t[l]&&0===s&&!1===c){if(l===t.length-1&&(a+=t[l]),""===a.trim()||"}"===a.trim()||";"===a.trim()){a="";continue}r.push(o.sexp2mic(a)),a="";continue}'"'===t[l]&&c?c=!1:'"'!==t[l]||c?"\\"===t[l]?f=!0:"("===t[l]?s++:")"===t[l]&&s--:c=!0}a+=t[l]}return r}};o.ml2tzjson=o.sexp2mic,o.tzjson2arr=o.mic2arr,o.mlraw2json=o.ml2mic,o.mintotz=o.totez,o.tztomin=o.mutez,t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prefix={tz1:new Uint8Array([6,161,159]),tz2:new Uint8Array([6,161,161]),tz3:new Uint8Array([6,161,164]),KT:new Uint8Array([2,90,121]),edpk:new Uint8Array([13,15,37,217]),edsk2:new Uint8Array([13,15,58,7]),spsk:new Uint8Array([17,162,224,201]),p2sk:new Uint8Array([16,81,238,189]),sppk:new Uint8Array([3,254,226,86]),p2pk:new Uint8Array([3,178,139,127]),edesk:new Uint8Array([7,90,60,179,41]),edsk:new Uint8Array([43,246,78,7]),edsig:new Uint8Array([9,245,205,134,18]),spsig1:new Uint8Array([13,115,101,19,63]),p2sig:new Uint8Array([54,240,44,52]),sig:new Uint8Array([4,130,43]),Net:new Uint8Array([87,82,0]),nce:new Uint8Array([69,220,169]),b:new Uint8Array([1,52]),o:new Uint8Array([5,116]),Lo:new Uint8Array([133,233]),LLo:new Uint8Array([29,159,109]),P:new Uint8Array([2,170]),Co:new Uint8Array([79,179]),id:new Uint8Array([153,103]),TZ:new Uint8Array([2,90,121])},t.watermark={block:new Uint8Array([1]),endorsement:new Uint8Array([2]),generic:new Uint8Array([3])};var n,i={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0A":"True","0B":"Unit","0C":"PACK","0D":"UNPACK","0E":"BLAKE2B","0F":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1A":"CONCAT","1B":"CONS","1C":"CREATE_ACCOUNT","1D":"CREATE_CONTRACT","1E":"IMPLICIT_ACCOUNT","1F":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2A":"GT","2B":"HASH_KEY","2C":"IF","2D":"IF_CONS","2E":"IF_LEFT","2F":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3A":"MUL","3B":"NEG","3C":"NEQ","3D":"NIL","3E":"NONE","3F":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4A":"STEPS_TO_QUOTA","4B":"SUB","4C":"SWAP","4D":"TRANSFER_TOKENS","4E":"SET_DELEGATE","4F":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5A":"contract","5B":"int","5C":"key","5D":"key_hash","5E":"lambda","5F":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6A":"mutez","6B":"timestamp","6C":"unit","6D":"operation","6E":"address","6F":"SLICE"},o=(n={},Object.keys(i).forEach(function(e){n[i[e]]=e}),n);t.forgeMappings={opMapping:i,opMappingReverse:o,primMapping:{"00":"int","01":"string","02":"seq","03":{name:"prim",len:0,annots:!1},"04":{name:"prim",len:0,annots:!0},"05":{name:"prim",len:1,annots:!1},"06":{name:"prim",len:1,annots:!0},"07":{name:"prim",len:2,annots:!1},"08":{name:"prim",len:2,annots:!0},"09":{name:"prim",len:3,annots:!0},"0A":"bytes"},primMappingReverse:{0:{false:"03",true:"04"},1:{false:"05",true:"06"},2:{false:"07",true:"08"},3:{true:"09"}},forgeOpTags:{endorsement:0,seed_nonce_revelation:1,double_endorsement_evidence:2,double_baking_evidence:3,activate_account:4,proposals:5,ballot:6,reveal:7,transaction:8,origination:9,delegation:10}},t.default={prefix:t.prefix,watermark:t.watermark,forgeMappings:t.forgeMappings}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,s)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=r(4),s=r(13),u=r(0),c=r(1),f=function(){function e(e,t,r){var f=this;this.publicKey=function(){return u.default.b58cencode(f._publicKey,c.prefix[f.curve+"pk"])},this.secretKey=function(){if(!f._secretKey)throw new Error("Secret key not known.");var e=f._secretKey;return"ed"===f.curve&&(e=o.crypto_sign_seed_keypair(e.slice(0,32)).privateKey),u.default.b58cencode(e,c.prefix[f.curve+"sk"])},this.publicKeyHash=function(){var e={ed:c.prefix.tz1,sp:c.prefix.tz2,p2:c.prefix.tz3}[f.curve];return u.default.b58cencode(o.crypto_generichash(20,f._publicKey),e)},this.initialize=function(e,t,r,l){return n(f,void 0,void 0,function(){var n,f,p,d,h,g,y,b,v,m;return i(this,function(i){switch(i.label){case 0:return[4,o.ready];case 1:if(i.sent(),r){if(!t)throw new Error("Fundraiser key provided without a passphrase.");return h=u.default.textDecode(u.default.textEncode(""+r+t)).normalize("NFKD"),n=a.pbkdf2Sync(e,"mnemonic"+h,2048,64,"sha512"),f=o.crypto_sign_seed_keypair(n.slice(0,32)),v=f.publicKey,m=f.privateKey,this._publicKey=v,this._secretKey=m,this.curve="ed",this._isSecret=!0,l(),[2]}if(this.curve=e.substr(0,2),!["sp","p2","ed"].includes(this.curve))throw new Error("Invalid prefix for a key encoding.");if(![54,55,88,98].includes(e.length))throw new Error("Invalid length for a key encoding");if(p="e"===e.substring(2,3),d=p?e.slice(3,5):e.slice(2,4),!["pk","sk"].includes(d))throw new Error("Invalid prefix for a key encoding.");if(this._isSecret="sk"===d,this._isSecret&&(e=u.default.b58cdecode(e,c.prefix[this.curve+(p?"e":"")+"sk"])),p){if(!t)throw new Error("Encrypted key provided without a passphrase.");h=e.slice(0,8),g=e.slice(8),y=a.pbkdf2Sync(t,h,32768,32,"sha512"),e=o.crypto_secretbox_open_easy(g,new Uint8Array(24),y)}if(this._isSecret)if(this._secretKey=e,"ed"===this.curve)64===e.length?this._publicKey=e.slice(32):(b=o.crypto_sign_seed_keypair(e,"uint8array"),v=b.publicKey,m=b.privateKey,this._publicKey=v,this._secretKey=m);else{if("sp"!==this.curve)throw"p2"===this.curve?new Error("Curve P256 key is not yet supported."):new Error("Provided key is not supported.");this._publicKey=s.publicKeyCreate(e)}else this._publicKey=e,this._secretKey=void 0;return l(),[2]}})})},this.sign=function(e,t){return n(f,void 0,void 0,function(){var r,n,a,s;return i(this,function(i){if(r=u.default.hex2buf(e),void 0!==t&&(r=u.default.mergebuf(t,r)),"ed"===this.curve)return n=o.crypto_sign_detached(o.crypto_generichash(32,r),this._secretKey),a=u.default.b58cencode(n,c.prefix.edsig),s=e+u.default.buf2hex(n),[2,{bytes:e,sig:u.default.b58cencode(n,c.prefix.sig),edsig:a,sbytes:s}];throw new Error("Provided curve not supported")})})},this.verify=function(e,t){if(!f._publicKey)throw new Error("Cannot verify without a public key");if("sig"!==t.slice(0,3)&&f.curve!==t.slice(0,2))throw new Error("Signature and public key curves mismatch.");if("ed"!==f.curve)throw new Error("Curve '"+f.curve+"' not supported");var r=u.default.hex2buf(e);try{return o.crypto_sign_verify_detached(t,r,f._publicKey)}catch(e){throw new Error("Signature is invalid.")}},this._isLedger=!1,this._ledgerPath="44'/1729'/0'/0'",this._ledgerCurve=0,this.ready=new Promise(function(n){f.initialize(e,t,r,n)})}return Object.defineProperty(e.prototype,"isLedger",{get:function(){return this._isLedger},set:function(e){this._isLedger=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ledgerPath",{get:function(){return this._ledgerPath},set:function(e){this._ledgerPath=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ledgerCurve",{get:function(){return this._ledgerCurve},set:function(e){this._ledgerCurve=e},enumerable:!0,configurable:!0}),e}();t.default=f},function(e,t){e.exports=require("libsodium-wrappers")},function(e,t){e.exports=require("pbkdf2")},function(e,t){e.exports=require("bs58check")},function(e,t){e.exports=require("bignumber.js")},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,s)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this;Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),s=r(0),u=r(1),c={toBytesInt32:function(e){return e=parseInt(e,10),new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]).buffer},toBytesInt32Hex:function(e){return s.default.buf2hex(c.toBytesInt32(e))},bool:function(e){return e?"ff":"00"},script:function(e){var t=c.encodeRawBytes(e.code).toLowerCase(),r=c.encodeRawBytes(e.storage).toLowerCase();return c.toBytesInt32Hex(t.length/2)+t+c.toBytesInt32Hex(r.length/2)+r},parameters:function(e){var t=c.encodeRawBytes(e).toLowerCase();return c.toBytesInt32Hex(t.length/2)+t},publicKeyHash:function(e){var t;return t="0"+(parseInt(e.substr(2,1),10)-1).toString(),t+=s.default.buf2hex(s.default.b58cdecode(e,u.prefix[e.substr(0,3)]))},address:function(e){var t;return"K"===e.substr(0,1)?(t="01",t+=s.default.buf2hex(s.default.b58cdecode(e,u.prefix.KT)),t+="00"):(t="00",t+=c.publicKeyHash(e)),t},zarith:function(e){var t="",r=parseInt(e,10);if(Number.isNaN(r))throw new TypeError("Error forging zarith "+e);for(;;){if(r<128){r<16&&(t+="0"),t+=r.toString(16);break}var n=r%128;r-=n,r/=128,t+=(n+=128).toString(16)}return t},publicKey:function(e){var t="";switch(e.substr(0,2)){case"ed":t="00";break;case"sp":t="01";break;case"p2":t="02"}return t+=s.default.buf2hex(s.default.b58cdecode(e,u.prefix[e.substr(0,4)]))},op:function(e){var t="";switch(t=s.default.buf2hex(new Uint8Array([u.forgeMappings.forgeOpTags[e.kind]])),u.forgeMappings.forgeOpTags[e.kind]){case 0:case 1:if(t+=s.default.buf2hex(c.toBytesInt32(e.level)),0===u.forgeMappings.forgeOpTags[e.kind])break;if(t+=e.nonce,1===u.forgeMappings.forgeOpTags[e.kind])break;case 2:case 3:throw new Error("Double bake and double endorse forging is not complete");case 4:if(t+=s.default.buf2hex(s.default.b58cdecode(e.pkh,u.prefix.tz1)),t+=e.secret,4===u.forgeMappings.forgeOpTags[e.kind])break;case 5:case 6:if(t+=c.publicKeyHash(e.source),t+=s.default.buf2hex(c.toBytesInt32(e.period)),5===u.forgeMappings.forgeOpTags[e.kind])throw new Error("Proposal forging is not complete");if(6===u.forgeMappings.forgeOpTags[e.kind]){t+=s.default.buf2hex(s.default.b58cdecode(e.proposal,u.prefix.P));t+="yay"===e.ballot?"00":"nay"===e.ballot?"01":"02";break}case 7:case 8:case 9:case 10:t+=c.address(e.source),t+=c.zarith(e.fee),t+=c.zarith(e.counter),t+=c.zarith(e.gas_limit),t+=c.zarith(e.storage_limit),7===u.forgeMappings.forgeOpTags[e.kind]?t+=c.publicKey(e.public_key):8===u.forgeMappings.forgeOpTags[e.kind]?(t+=c.zarith(e.amount),t+=c.address(e.destination),void 0!==e.parameters&&e.parameters?(t+=c.bool(!0),t+=c.parameters(e.parameters)):t+=c.bool(!1)):9===u.forgeMappings.forgeOpTags[e.kind]?(t+=c.publicKeyHash(e.manager_pubkey||e.managerPubkey),t+=c.zarith(e.balance),t+=c.bool(e.spendable),t+=c.bool(e.delegatable),void 0!==e.delegate&&e.delegate?(t+=c.bool(!0),t+=c.publicKeyHash(e.delegate)):t+=c.bool(!1),void 0!==e.script&&e.script?(t+=c.bool(!0),t+=c.script(e.script)):t+=c.bool(!1)):10===u.forgeMappings.forgeOpTags[e.kind]&&(void 0!==e.delegate&&e.delegate?(t+=c.bool(!0),t+=c.publicKeyHash(e.delegate)):t+=c.bool(!1))}return t},forge:function(e,t){return n(o,void 0,void 0,function(){var r;return i(this,function(n){if(!e.contents)throw new Error("No operation contents provided.");if(!e.branch)throw new Error("No operation branch provided.");return r=s.default.buf2hex(s.default.b58cdecode(e.branch,u.prefix.b)),e.contents.forEach(function(e){r+=c.op(e)}),[2,{opbytes:r,opOb:e,counter:t}]})})},decodeRawBytes:function(e){e=e.toUpperCase();var t=0,r=function(r){return e.slice(t,t+r)},n=function(){var e=r(2),i=u.forgeMappings.primMapping[e];if(i instanceof Object){t+=2;var o=u.forgeMappings.opMapping[r(2)];t+=2;var c={prim:o,args:Array(i.len).slice().map(function(){return n()}),annots:void 0};if(i.len||delete c.args,i.annots){var f=2*parseInt(r(8),16);t+=8;var l=r(f).match(/[\dA-F]{2}/g);if(t+=f,l){var p=new Uint8Array(l.map(function(e){return parseInt(e,16)})),d=s.default.textDecode(p);c.annots=d.split(" ")}}else delete c.annots;return c}if("0A"===e){t+=2;var h=r(8);t+=8;var g=2*parseInt(h,16),y=r(g);return t+=g,{bytes:y}}if("01"===e){t+=2;h=r(8);t+=8;g=2*parseInt(h,16),y=r(g);t+=g;var b=y.match(/[\dA-F]{2}/g);if(b instanceof Array){var v=new Uint8Array(b.map(function(e){return parseInt(e,16)}));return{string:s.default.textDecode(v)}}throw new Error("Input bytes error")}if("00"===e){t+=2;var m=parseInt(r(2),16).toString(2).padStart(8,"0");t+=2;for(var w=[m.slice(2)],_="1"===m[0];_;){var k=parseInt(r(2),16).toString(2).padStart(8,"0");t+=2,w.push(k.slice(1)),_="1"===k[0]}return{int:new a.BigNumber(w.reverse().join(""),2).toString()}}if("02"===e){t+=2;h=r(8);t+=8;g=2*parseInt(h,16);for(var x=t+g,E=[];x>t;)E.push(n());return E}throw new Error("Invalid raw bytes: Byte:"+e+" Index:"+t)};return n()},encodeRawBytes:function(e){var t=function(e){var r=[];if(e instanceof Array){r.push("02");var n=e.map(function(e){return t(e)}).join(""),i=n.length/2;r.push(i.toString(16).padStart(8,"0")),r.push(n)}else if(e instanceof Object)if(e.prim){var o=e.args?e.args.length:0;if(r.push(u.forgeMappings.primMappingReverse[o][""+!!e.annots]),r.push(u.forgeMappings.opMappingReverse[e.prim]),e.args&&e.args.forEach(function(e){return r.push(t(e))}),e.annots){var c=e.annots.map(function(e){return s.default.buf2hex(s.default.textEncode(e))}).join("20");r.push((c.length/2).toString(16).padStart(8,"0")),r.push(c)}}else if(e.bytes){i=e.bytes.length/2;r.push("0A"),r.push(i.toString(16).padStart(8,"0")),r.push(e.bytes)}else if(e.int){var f=new a.BigNumber(e.int,10),l="-"===f.toString(2)[0]?"1":"0",p=f.toString(2).replace("-",""),d=void 0;d=p.length<=6?6:(p.length-6)%7?(p.length+7-(p.length-6))%7:p.length;var h=p.padStart(d,"0").match(/\d{6,7}/g).reverse();h[0]=l+h[0];var g=h.map(function(e,t){return parseInt((t===h.length-1?"0":"1")+e,2).toString(16).padStart(2,"0")}).join("");r.push("00"),r.push(g)}else if(e.string){var y=s.default.textEncode(e.string),b=[].slice.call(y).map(function(e){return e.toString(16).padStart(2,"0")}).join("");i=y.length;r.push("01"),r.push(i.toString(16).padStart(8,"0")),r.push(b)}return r.join("")};return t(e).toUpperCase()}};t.default=c},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,s)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this;Object.defineProperty(t,"__esModule",{value:!0});var a=r(15).default,s=r(16).default,u={getAddress:function(e){var t=void 0===e?{}:e,r=t.path,u=void 0===r?"44'/1729'/0'/0'":r,c=t.displayConfirm,f=void 0===c||c,l=t.curve,p=void 0===l?0:l;return n(o,void 0,void 0,function(){var e,t,r,n;return i(this,function(i){switch(i.label){case 0:return[4,a.create()];case 1:e=i.sent(),t=new s(e),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.getAddress(u,f,p)];case 3:return r=i.sent(),[3,5];case 4:return n=i.sent(),e.close(),[2,n];case 5:return e.close(),[2,r]}})})},signOperation:function(e){var t=e.path,r=void 0===t?"44'/1729'/0'/0'":t,u=e.rawTxHex,c=e.curve,f=void 0===c?0:c;return n(o,void 0,void 0,function(){var e,t,n,o;return i(this,function(i){switch(i.label){case 0:return[4,a.create()];case 1:e=i.sent(),t=new s(e),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.signOperation(r,"03"+u,f)];case 3:return n=i.sent().signature,[3,5];case 4:return o=i.sent(),e.close(),[2,o];case 5:return e.close(),[2,n]}})})},getVersion:function(){return n(o,void 0,void 0,function(){var e,t,r,n;return i(this,function(i){switch(i.label){case 0:return[4,a.create()];case 1:e=i.sent(),t=new s(e),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.getVersion()];case 3:return r=i.sent(),[3,5];case 4:return n=i.sent(),e.close(),[2,n];case 5:return e.close(),[2,r]}})})}};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(2);t.Key=i.default;var o=r(19);t.crypto=o.default;var a=r(7);t.forge=a.default;var s=r(0);t.utility=s.default;var u=r(8);t.ledger=u.default;var c=r(1);t.prefix=c.prefix,t.watermark=c.watermark,t.forgeMappings=c.forgeMappings,t.default=n.default},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,s)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(11),c=r(12),f=r(2),l=r(7),p=r(0),d=r(8),h=r(1),g=function(e){function t(t,r,n,i){void 0===t&&(t="http://127.0.0.1:8732"),void 0===r&&(r="main"),void 0===n&&(n="main"),void 0===i&&(i={});var c=e.call(this,t,r,n,i)||this;return c.importKey=function(e,t,r){return a(c,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return this.key=new f.default(e,t,r),[4,this.key.ready];case 1:return n.sent(),[2]}})})},c.importLedger=function(e,t){return void 0===e&&(e="44'/1729'/0'/0'"),void 0===t&&(t=0),a(c,void 0,void 0,function(){var r;return s(this,function(n){switch(n.label){case 0:return[4,d.default.getAddress({path:e,displayConfirm:!0,curve:t})];case 1:return r=n.sent().publicKey,this.key=new f.default(r),[4,this.key.ready];case 2:return n.sent(),this.key&&(this.key.isLedger=!0,this.key.ledgerPath=e,this.key.ledgerCurve=t),[2]}})})},c.query=function(e,t,r){return void 0===t?void 0===r?r="GET":t={}:void 0===r&&(r="POST"),new Promise(function(n,i){try{var o=new u.default;o.open(r,c.provider+e,!0),o.onload=function(){if(c._debugMode&&console.log("Node call:",e,t),200===o.status)if(o.responseText){var r=JSON.parse(o.responseText);c._debugMode&&console.log("Node response:",e,t,r),void 0!==r.error?i(r.error):(void 0!==r.ok&&(r=r.ok),n(r))}else i("Empty response returned");else o.responseText?i(o.responseText):i(o.statusText)},o.onerror=function(){i(o.statusText)},"POST"===r?(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(t))):o.send()}catch(e){i(e)}})},c.account=function(e){var t=e.balance,r=e.spendable,n=e.delegatable,i=e.delegate,u=e.fee,f=void 0===u?c.defaultFee:u,l=e.gasLimit,d=void 0===l?1e4:l,h=e.storageLimit,g=void 0===h?257:h;return a(c,void 0,void 0,function(){var e,a;return s(this,function(s){return e={},void 0!==r&&(e.spendable=r),void 0!==n&&(e.delegatable=n),void 0!==i&&i&&(e.delegate=i),a=[o({kind:"origination",balance:p.default.mutez(t),fee:f,gas_limit:d,storage_limit:g,manager_pubkey:this.key.publicKeyHash()},e)],[2,this.sendOperation({operation:a})]})})},c.getBalance=function(e){return c.query("/chains/"+c.chain+"/blocks/head/context/contracts/"+e+"/balance")},c.getDelegate=function(e){return c.query("/chains/"+c.chain+"/blocks/head/context/contracts/"+e+"/delegate").then(function(e){return e||!1})},c.getManager=function(e){return c.query("/chains/"+c.chain+"/blocks/head/context/contracts/"+e+"/manager_key")},c.getCounter=function(e){return c.query("/chains/"+c.chain+"/blocks/head/context/contracts/"+e+"/counter")},c.getBaker=function(e){return c.query("/chains/"+c.chain+"/blocks/head/context/delegates/"+e)},c.getHeader=function(){return c.query("/chains/"+c.chain+"/blocks/head/header")},c.getHead=function(){return c.query("/chains/"+c.chain+"/blocks/head")},c.getHeadHash=function(){return c.query("/chains/"+c.chain+"/blocks/head/hash")},c.getBallotList=function(){return c.query("/chains/"+c.chain+"/blocks/head/votes/ballot_list")},c.getProposals=function(){return c.query("/chains/"+c.chain+"/blocks/head/votes/proposals")},c.getBallots=function(){return c.query("/chains/"+c.chain+"/blocks/head/votes/ballots")},c.getListings=function(){return c.query("/chains/"+c.chain+"/blocks/head/votes/listings")},c.getCurrentProposal=function(){return c.query("/chains/"+c.chain+"/blocks/head/votes/current_proposal")},c.getCurrentPeriod=function(){return c.query("/chains/"+c.chain+"/blocks/head/votes/current_period_kind")},c.getCurrentQuorum=function(){return c.query("/chains/"+c.chain+"/blocks/head/votes/current_quorum")},c.awaitOperation=function(e,t,r){if(void 0===t&&(t=10),void 0===r&&(r=180),r<=0)throw new Error("Timeout must be more than 0");if(t<=0)throw new Error("Interval must be more than 0");var n=Math.ceil(r/t)+1,i=0,o=!1,a=function(t){t.hash===e&&(o=!0)};return new Promise(function(e,r){var s=function(){return c.getHead().then(function(u){i++;for(var c=3;c>=0;c--)u.operations[c].forEach(a);o?e(u.hash):i>=n?r(new Error("Timeout")):setTimeout(s,1e3*t)})};s()})},c.call=function(e,t){return c.query(e,t)},c.prepareOperation=function(e){var t,r,n=e.operation,i={},u=[],f=!1,p=[];u.push(c.getHeader()),p=Array.isArray(n)?n.slice():[n];for(var d=c.key.publicKeyHash(),h=0;h<p.length;h++)if(["transaction","origination","delegation"].includes(p[h].kind)){f=!0,u.push(c.getCounter(d)),u.push(c.getManager(d));break}return Promise.all(u).then(function(e){var n=e[0],u=e[1],h=e[2];return a(c,void 0,void 0,function(){var e,a,c,g,y=this;return s(this,function(s){switch(s.label){case 0:return r=n,f&&void 0===h.key&&(e={kind:"reveal",fee:"zero"===this.network?1e5:1269,public_key:this.key.publicKey(),source:d,gas_limit:1e4,storage_limit:0},p.unshift(e)),t=parseInt(u,10),(!this._counters[d]||this._counters[d]<t)&&(this._counters[d]=t),a=function(e){return e.map(function(e){var t=o({},e);if(["proposals","ballot","transaction","origination","delegation"].includes(e.kind)&&void 0===e.source&&(t.source=d),["reveal","transaction","origination","delegation"].includes(e.kind)){void 0===e.fee?t.fee="0":t.fee=""+e.fee,void 0===e.gas_limit?t.gas_limit="0":t.gas_limit=""+e.gas_limit,void 0===e.storage_limit?t.storage_limit="0":t.storage_limit=""+e.storage_limit,void 0!==e.balance&&(t.balance=""+t.balance),void 0!==e.amount&&(t.amount=""+t.amount);var r=++y._counters[d];t.counter=""+r}return t})},i.branch=r.hash,i.contents=a(p),c="",this._localForge&&!this._validateLocalForge?[3,2]:[4,this.query("/chains/"+this.chain+"/blocks/"+r.hash+"/helpers/forge/operations",i)];case 1:c=s.sent(),s.label=2;case 2:return i.protocol=r.protocol,this._localForge?[4,l.default.forge(i,t)]:[2,{opbytes:c,opOb:i,counter:t}];case 3:if(g=s.sent(),this._validateLocalForge){if(g.opbytes===c)return[2,g];throw new Error("Forge validation error - local and remote bytes don't match")}return[2,o({},g,{counter:t})]}})})})},c.simulateOperation=function(e){var t=e.operation;return c.prepareOperation({operation:t}).then(function(e){return c.query("/chains/"+c.chain+"/blocks/head/helpers/scripts/run_operation",e.opOb)})},c.sendOperation=function(e){var t=e.operation,r=e.skipPrevalidation,n=void 0!==r&&r,i=e.skipSignature,o=void 0!==i&&i;return a(c,void 0,void 0,function(){var e,r,i,a,u,c,f=this;return s(this,function(s){switch(s.label){case 0:return[4,this.prepareOperation({operation:t})];case 1:return e=s.sent(),this.key.isLedger?[4,d.default.signOperation({path:this.key.ledgerPath,rawTxHex:e.opbytes,curve:this.key.ledgerCurve})]:[3,3];case 2:return r=s.sent(),i=p.default.hex2buf(r),a=p.default.b58cencode(i,h.prefix.edsig),e.opbytes+=r,e.opOb.signature=a,[3,6];case 3:return o?(e.opbytes+="00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",e.opOb.signature="edsigtXomBKi5CTRf5cjATJWSyaRvhfYNHqSUGrn4SdbYRcGwQrUGjzEfQDTuqHhuA8b2d8NarZjz8TRf65WkpQmo423BtomS8Q",[3,6]):[3,4];case 4:return[4,this.key.sign(e.opbytes,h.watermark.generic)];case 5:u=s.sent(),e.opbytes=u.sbytes,e.opOb.signature=u.edsig,s.label=6;case 6:return c=this.key.publicKeyHash(),n?[2,this.silentInject(e.opbytes).catch(function(t){throw f._counters[c]=e.counter,t})]:[2,this.inject(e.opOb,e.opbytes).catch(function(t){throw f._counters[c]=e.counter,t})]}})})},c.inject=function(e,t){var r=[],n=[];return c.query("/chains/"+c.chain+"/blocks/head/helpers/preapply/operations",[e]).then(function(e){if(!Array.isArray(e))throw new Error("RPC Fail");for(var i=0;i<e.length;i++)for(var o=0;o<e[i].contents.length;o++)r.push(e[i].contents[o]),void 0!==e[i].contents[o].metadata.operation_result&&"failed"===e[i].contents[o].metadata.operation_result.status&&(n=n.concat(e[i].contents[o].metadata.operation_result.errors));if(n.length)throw new Error({error:"Operation Failed",errors:n});return c.query("/injection/operation",t)}).then(function(e){return{hash:e,operations:r}})},c.silentInject=function(e){return c.query("/injection/operation",e).then(function(e){return{hash:e}})},c.transfer=function(e){var t=e.to,r=e.amount,n=e.parameter,i=e.fee,o=void 0===i?c.defaultFee:i,a=e.gasLimit,s=void 0===a?10100:a,u=e.storageLimit,f=void 0===u?0:u,l=e.mutez,d=void 0!==l&&l,h=e.rawParam,g=void 0!==h&&h,y={kind:"transaction",fee:o,gas_limit:s,storage_limit:f,amount:d?p.default.mutez(r):r,destination:t};return n&&(y.parameters=g?n:p.default.sexp2mic(n)),c.sendOperation({operation:[y]})},c.activate=function(e,t){var r={kind:"activate_account",pkh:e,secret:t};return c.sendOperation({operation:[r],skipSignature:!0})},c.originate=function(e){var t=e.balance,r=e.code,n=e.init,i=e.spendable,o=void 0!==i&&i,u=e.delegatable,f=void 0!==u&&u,l=e.delegate,d=e.fee,h=void 0===d?c.defaultFee:d,g=e.gasLimit,y=void 0===g?1e4:g,b=e.storageLimit,v=void 0===b?257:b;return a(c,void 0,void 0,function(){var e,i,a,u;return s(this,function(s){return e=p.default.ml2mic(r),i={code:e,storage:p.default.sexp2mic(n)},a=this.key.publicKeyHash(),u={kind:"origination",fee:h,gas_limit:y,storage_limit:v,balance:p.default.mutez(t),spendable:o,delegatable:f,delegate:void 0!==l&&l?l:a,script:i},"zero"===this.network?u.manager_pubkey=a:u.managerPubkey=a,[2,this.sendOperation({operation:[u]})]})})},c.setDelegate=function(e){var t=e.delegate,r=e.fee,n=void 0===r?c.defaultFee:r,i=e.gasLimit,o=void 0===i?1e4:i,u=e.storageLimit,f=void 0===u?0:u;return a(c,void 0,void 0,function(){var e,r;return s(this,function(i){return e=this.key.publicKeyHash(),r={kind:"delegation",fee:n,gas_limit:o,storage_limit:f,delegate:void 0!==t?t:e},[2,this.sendOperation({operation:[r]})]})})},c.registerDelegate=function(e){var t=e.fee,r=void 0===t?c.defaultFee:t,n=e.gasLimit,i=void 0===n?1e4:n,o=e.storageLimit,u=void 0===o?0:o;return a(c,void 0,void 0,function(){var e,t;return s(this,function(n){return e=this.key.publicKeyHash(),t={kind:"delegation",fee:r,gas_limit:i,storage_limit:u,delegate:e},[2,this.sendOperation({operation:[t]})]})})},c.typecheckCode=function(e){var t=p.default.ml2mic(e);return c.query("/chains/"+c.chain+"/blocks/head/helpers/scripts/typecheck_code",{program:t,gas:"10000"})},c.packData=function(e,t){var r={data:p.default.sexp2mic(e),type:p.default.sexp2mic(t),gas:"4000000"};return c.query("/chains/"+c.chain+"/blocks/head/helpers/scripts/pack_data",r)},c.typecheckData=function(e,t){var r={data:p.default.sexp2mic(e),type:p.default.sexp2mic(t),gas:"4000000"};return c.query("/chains/"+c.chain+"/blocks/head/helpers/scripts/typecheck_data",r)},c.runCode=function(e,t,r,n,i){void 0===i&&(i=!1);var o=i?"trace_code":"run_code";return c.query("/chains/"+c.chain+"/blocks/head/helpers/scripts/"+o,{script:p.default.ml2mic(e),amount:""+p.default.mutez(t),input:p.default.sexp2mic(r),storage:p.default.sexp2mic(n)})},c._localForge=i.localForge||!0,c._validateLocalForge=i.validateLocalForge||!1,c._counters={},c._debugMode=i.debugMode||!1,c}return i(t,e),Object.defineProperty(t.prototype,"localForge",{get:function(){return this._localForge},set:function(e){this._localForge=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validateLocalForge",{get:function(){return this._validateLocalForge},set:function(e){this._validateLocalForge=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"counters",{get:function(){return this._counters},set:function(e){this._counters=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debugMode",{get:function(){return this._debugMode},set:function(e){this._debugMode=e},enumerable:!0,configurable:!0}),t.prototype.setProvider=function(t,r,n){void 0===r&&(r=this.chain),void 0===n&&(n=this.network),e.prototype.setProvider.call(this,t,r,n),this.provider=t,this.chain=r,this.network=n},t}(c.default);t.default=g},function(e,t){e.exports=require("xhr2")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n){void 0===r&&(r="main"),void 0===n&&(n={}),this._provider=e,this._network=r,this._chain=t,this._defaultFee=n.defaultFee||1278}return Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},set:function(e){this._provider=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"network",{get:function(){return this._network},set:function(e){this._network=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chain",{get:function(){return this._chain},set:function(e){this._chain=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultFee",{get:function(){return this._defaultFee},set:function(e){this._defaultFee=e},enumerable:!0,configurable:!0}),e.prototype.setProvider=function(e,t,r){void 0===t&&(t=this.chain),void 0===r&&(r=this.network),this._provider=e,this._chain=t,this._network=r},e}();t.default=n},function(e,t){e.exports=require("secp256k1")},function(e,t){e.exports=require("buffer")},function(e,t){e.exports=require("@ledgerhq/hw-transport-node-hid")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),i=function(){function e(e){this.transport=e,e.decorateAppAPIMethods(this,["getAddress","signOperation","getVersion"],"XTZ")}return e.prototype.getAddress=function(e,t,r){var i=n.splitPath(e);r=r||0;var o=Buffer.alloc(1+4*i.length);return o[0]=i.length,i.forEach(function(e,t){o.writeUInt32BE(e,1+4*t)}),this.transport.send(128,t?3:2,0,r,o).then(function(e){var t=e[0],i=e.slice(1,1+t);return n.encodePublicKey(i,r)})},e.prototype.signOperation=function(e,t,r){var i,o=this,a=n.splitPath(e),s=0,u=Buffer.from(t,"hex"),c=[];r=r||0;var f=Buffer.alloc(4*a.length+1);for(f[0]=a.length,a.forEach(function(e,t){f.writeUInt32BE(e,1+4*t)}),c.push(f);s!==u.length;){var l=void 0;l=s+255>=u.length?u.length-s:255;var p=Buffer.alloc(l);u.copy(p,0,s,s+l),c.push(p),s+=l}return n.foreach(c,function(e,t){var n=1;return 0===t?n=0:t===c.length-1&&(n=129),o.transport.send(128,4,n,r,e).then(function(e){i=e})}).then(function(){return{signature:i.slice(0,i.length-2).toString("hex")}})},e.prototype.getVersion=function(){return this.transport.send(128,0,0,0,Buffer.alloc(0)).then(function(e){var t=1===e[0];return{major:e[1],minor:e[2],patch:e[3],bakingApp:t}})},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(18);t.defer=function(){var e,t,r=new Promise(function(r,n){e=r,t=n});if(!e||!t)throw new Error("defer() error");return{promise:r,resolve:e,reject:t}},t.splitPath=function(e){var t=[];return e.split("/").forEach(function(e){var r=parseInt(e,10);Number.isNaN(r)||(e.length>1&&"'"===e[e.length-1]&&(r+=2147483648),t.push(r))}),t},t.eachSeries=function(e,t){return e.reduce(function(e,r){return e.then(function(){return t(r)})},Promise.resolve())},t.foreach=function(e,t){return Promise.resolve().then(function(){return function e(r,n,i){return r>=n.length?i:t(n[r],r).then(function(t){return i.push(t),e(r+1,n,i)})}(0,e,[])})},t.doIf=function(e,t){return Promise.resolve().then(function(){if(e)return t()})},t.asyncWhile=function(e,t){return Promise.resolve([]).then(function r(n){return e()?t().then(function(e){return n.push(e),r(n)}):n})};var o=function(e){switch(e){case 0:return Buffer.of(13,15,37,217);case 1:return Buffer.of(3,254,226,86);case 2:return Buffer.of(3,178,139,127);default:return Buffer.of(0)}},a=function(e){switch(e){case 0:return Buffer.of(6,161,159);case 1:return Buffer.of(6,161,161);case 2:return Buffer.of(6,161,164);default:return Buffer.of(0)}};t.encodePublicKey=function(e,t){return e=function(e,t){switch(t){case 0:return(e=e.slice(0))[0]=t,e;case 1:case 2:return Buffer.concat([Buffer.of(t,2+(1&e[64])),e.slice(1,33)]);default:return Buffer.of(0)}}(e,t),{publicKey:s(e),address:u(e)}};var s=function(e){var t=e[0],r=e.slice(1);return n.default.encode(Buffer.concat([o(t),r]))},u=function(e){var t=e[0],r=e.slice(1),o=i.default(20);return o.update(r),o.digest(o=Buffer.alloc(20)),n.default.encode(Buffer.concat([a(t),o]))}},function(e,t){e.exports=require("blake2b")},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(a,s)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this;Object.defineProperty(t,"__esModule",{value:!0});var a=r(20),s=r(4),u=r(3),c=r(0),f=r(1),l={extractKeys:function(e,t){return void 0===t&&(t=""),n(o,void 0,void 0,function(){var r,n,o,a,l,p,d,h,g,y;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,u.ready];case 1:return i.sent(),[3,3];case 2:throw r=i.sent(),new Error(r);case 3:if(n=u,o=e.substr(0,2),![54,55,88,98].includes(e.length))throw new Error("Invalid length for a key encoding");if(a="e"===e.substring(2,3),"ed"===o){if(a){if(l=c.default.b58cdecode(e,f.prefix.edesk),p=l.slice(0,8),d=l.slice(8),!t)throw new Error("No password was provided to decrypt the key");return h=s.pbkdf2Sync(t,p,32768,32,"sha512"),y=n.crypto_sign_seed_keypair(n.crypto_secretbox_open_easy(d,new Uint8Array(24),h)),[2,{sk:c.default.b58cencode(y.privateKey,f.prefix.edsk),pk:c.default.b58cencode(y.publicKey,f.prefix.edpk),pkh:c.default.b58cencode(n.crypto_generichash(20,y.publicKey),f.prefix.tz1)}]}if(98===e.length)return[2,{sk:e,pk:c.default.b58cencode(c.default.b58cdecode(e,f.prefix.edsk).slice(32),f.prefix.edpk),pkh:c.default.b58cencode(n.crypto_generichash(20,c.default.b58cdecode(e,f.prefix.edsk).slice(32)),f.prefix.tz1)}];if(54===e.length)return g=c.default.b58cdecode(e,f.prefix.edsk2),y=n.crypto_sign_seed_keypair(g),[2,{sk:c.default.b58cencode(y.privateKey,f.prefix.edsk),pk:c.default.b58cencode(y.publicKey,f.prefix.edpk),pkh:c.default.b58cencode(n.crypto_generichash(20,y.publicKey),f.prefix.tz1)}]}return console.error("Invalid prefix for a key encoding"),[2,{sk:"",pk:"",pkh:""}]}})})},generateMnemonic:function(){return a.generateMnemonic(160)},checkAddress:function(e){try{return c.default.b58cdecode(e,f.prefix.tz1),!0}catch(e){return!1}},generateKeys:function(e,t){return n(o,void 0,void 0,function(){var r,n,o,s;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,u.ready];case 1:return i.sent(),[3,3];case 2:throw r=i.sent(),new Error(r);case 3:return n=u,[4,a.mnemonicToSeed(e,t).then(function(e){return e.slice(0,32)})];case 4:return o=i.sent(),s=n.crypto_sign_seed_keypair(o),[2,{mnemonic:e,passphrase:t,sk:c.default.b58cencode(s.privateKey,f.prefix.edsk),pk:c.default.b58cencode(s.publicKey,f.prefix.edpk),pkh:c.default.b58cencode(n.crypto_generichash(20,s.publicKey),f.prefix.tz1)}]}})})},sign:function(e,t,r,a){return void 0===a&&(a=""),n(o,void 0,void 0,function(){var n,o,s,p,d,h,g;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,u.ready];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),new Error(n);case 3:if(o=u,54!==t.length&&55!==t.length)return[3,7];i.label=4;case 4:return i.trys.push([4,6,,7]),[4,l.extractKeys(t,a)];case 5:return t=i.sent().sk,[3,7];case 6:throw s=i.sent(),new Error(s);case 7:return p=c.default.hex2buf(e),void 0!==r&&(p=c.default.mergebuf(r,p)),d=o.crypto_sign_detached(o.crypto_generichash(32,p),c.default.b58cdecode(t,f.prefix.edsk),"uint8array"),h=c.default.b58cencode(d,f.prefix.edsig),g=e+c.default.buf2hex(d),[2,{bytes:e,sig:c.default.b58cencode(d,f.prefix.sig),edsig:h,sbytes:g}]}})})},verify:function(e,t,r){return n(o,void 0,void 0,function(){var n;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,u.ready];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),new Error(n);case 3:return[2,u.crypto_sign_verify_detached(t,c.default.hex2buf(e),c.default.b58cdecode(r,f.prefix.edpk))]}})})}};t.default=l},function(e,t){e.exports=require("bip39")}]);