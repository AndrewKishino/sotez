!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(global,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(r){return e[r]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=24)}([function(e,r){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,r){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,r){e.exports=require("@babel/runtime/regenerator")},function(e,r){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,r){e.exports=require("libsodium-wrappers")},function(e,r){e.exports=require("bignumber.js")},function(e,r){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,r){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,r){e.exports=require("@babel/runtime/helpers/createClass")},function(e,r){e.exports=require("bs58check")},function(e,r){e.exports=require("@babel/runtime/helpers/objectSpread")},function(e,r){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,r){e.exports=require("bip39")},function(e,r){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,r){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,r){e.exports=require("@babel/runtime/helpers/get")},function(e,r){e.exports=require("@babel/runtime/helpers/inherits")},function(e,r){e.exports=require("xhr2")},function(e,r){e.exports=require("node-webcrypto-ossl")},function(e,r){e.exports=require("buffer")},function(e,r){e.exports=require("@ledgerhq/hw-transport-node-hid")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),a=t(22);var o=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.transport=r,r.decorateAppAPIMethods(this,["getAddress","signOperation","getVersion"],"XTZ")}return n(e,[{key:"getAddress",value:function(e,r,t,n){n||(n=r?3:2);var o=(0,a.splitPath)(e);t=t||0;var i=new Buffer(1+4*o.length);return i[0]=o.length,o.forEach(function(e,r){i.writeUInt32BE(e,1+4*r)}),this.transport.send(128,n,0,t,i).then(function(e){var r=e[0],n=e.slice(1,1+r);return(0,a.encodePublicKey)(n,t)})}},{key:"signOperation",value:function(e,r,t){var n=this,o=(0,a.splitPath)(e),i=0,s=new Buffer(r,"hex"),c=[],u=void 0;t=t||0;var p=new Buffer(4*o.length+1);for(p[0]=o.length,o.forEach(function(e,r){p.writeUInt32BE(e,1+4*r)}),c.push(p);i!==s.length;){var f=void 0;f=i+255>=s.length?s.length-i:255;var d=new Buffer(f);s.copy(d,0,i,i+f),c.push(d),i+=f}return(0,a.foreach)(c,function(e,r){var a=1;return 0===r?a=0:r===c.length-1&&(a=129),n.transport.send(128,4,a,t,e).then(function(e){u=e})}).then(function(){return{signature:u.slice(0,u.length-2).toString("hex")}})}},{key:"getVersion",value:function(){return this.transport.send(128,0,0,0,new Buffer(0)).then(function(e){var r=1==e[0];return{major:e[1],minor:e[2],patch:e[3],bakingApp:r}})}}]),e}();r.default=o},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodePublicKey=void 0,r.defer=function(){var e=void 0,r=void 0,t=new Promise(function(t,n){e=t,r=n});if(!e||!r)throw"defer() error";return{promise:t,resolve:e,reject:r}},r.splitPath=function(e){var r=[];return e.split("/").forEach(function(e){var t=parseInt(e,10);isNaN(t)||(e.length>1&&"'"===e[e.length-1]&&(t+=2147483648),r.push(t))}),r},r.eachSeries=function(e,r){return e.reduce(function(e,t){return e.then(function(){return r(t)})},Promise.resolve())},r.foreach=function(e,r){return Promise.resolve().then(function(){return function e(t,n,a){return t>=n.length?a:r(n[t],t).then(function(r){return a.push(r),e(t+1,n,a)})}(0,e,[])})},r.doIf=function(e,r){return Promise.resolve().then(function(){if(e)return r()})},r.asyncWhile=function(e,r){return Promise.resolve([]).then(function t(n){return e()?r().then(function(e){return n.push(e),t(n)}):n})};var n=o(t(9)),a=o(t(23));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){switch(e){case 0:return Buffer.of(13,15,37,217);case 1:return Buffer.of(3,254,226,86);case 2:return Buffer.of(3,178,139,127)}},s=function(e){switch(e){case 0:return Buffer.of(6,161,159);case 1:return Buffer.of(6,161,161);case 2:return Buffer.of(6,161,164)}},c=(r.encodePublicKey=function(e,r){return e=function(e,r){switch(r){case 0:return(e=e.slice(0))[0]=r,e;case 1:case 2:return Buffer.concat([Buffer.of(r,2+(1&e[64])),e.slice(1,33)])}}(e,r),{publicKey:c(e),address:u(e)}},function(e){var r=e[0],t=e.slice(1);return n.default.encode(Buffer.concat([i(r),t]))}),u=function(e){var r=e[0],t=e.slice(1),o=(0,a.default)(20);return o.update(t),o.digest(o=new Buffer(20)),n.default.encode(Buffer.concat([s(r),o]))}},function(e,r){e.exports=require("blake2b")},function(e,r,t){"use strict";t.r(r);var n=t(13),a=t.n(n),o=t(6),i=t.n(o),s=t(2),c=t.n(s),u=t(10),p=t.n(u),f=t(3),d=t.n(f),l=t(7),h=t.n(l),g=t(8),v=t.n(g),b=t(14),y=t.n(b),m=t(1),k=t.n(m),w=t(11),x=t.n(w),_=t(15),A=t.n(_),E=t(16),O=t.n(E),T=t(0),S=t.n(T),B=t(17),P=t.n(B),L=function(){function e(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};h()(this,e),S()(this,"_provider",void 0),S()(this,"_network",void 0),S()(this,"_defaultFee",void 0),S()(this,"_chain",void 0),this._provider=r,this._network=n,this._chain=t,this._defaultFee=a.defaultFee||1278}return v()(e,[{key:"setProvider",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.chain,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.network;this._provider=e,this._chain=r,this._network=t}},{key:"provider",get:function(){return this._provider},set:function(e){this._provider=e}},{key:"network",get:function(){return this._network},set:function(e){this._network=e}},{key:"chain",get:function(){return this._chain},set:function(e){this._chain=e}},{key:"defaultFee",get:function(){return this._defaultFee},set:function(e){this._defaultFee=e}}]),e}(),I=t(5),U=t(9),C=t.n(U);"undefined"==typeof Buffer&&(Buffer=t(19));var q={textEncode:function(e){return new Uint8Array(Buffer.from(e,"utf8"))},textDecode:function(e){return Buffer.from(e).toString("utf8")},b582int:function(e){for(var r=new I.BigNumber(0),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",n=0;n<e.length;n++)r=r.plus(new I.BigNumber(t.indexOf(e[e.length-1-n])).multipliedBy(new I.BigNumber(t.length).exponentiatedBy(n)));return r.toString(16)},totez:function(e){return parseInt(e,10)/1e6},mutez:function(e){return new I.BigNumber(new I.BigNumber(e).toFixed(6)).multipliedBy(1e6).toString()},b58cencode:function(e,r){var t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),C.a.encode(Buffer.from(t,"hex"))},b58cdecode:function(e,r){return C.a.decode(e).slice(r.length)},buf2hex:function(e){var r=new Uint8Array(e),t=[];return r.forEach(function(e){var r=e.toString(16),n="00".concat(r).slice(-2);t.push(n)}),t.join("")},hex2buf:function(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)}))},hexNonce:function(e){for(var r="";e--;)r+="0123456789abcedf"[16*Math.random()|0];return r},mergebuf:function(e,r){var t=new Uint8Array(e.length+r.length);return t.set(e),t.set(r,e.length),t},sexp2mic:function e(r){"("===(r=r.replace(/(?:@[a-z_]+)|(?:#.*$)/gm,"").replace(/\s+/g," ").trim()).charAt(0)&&(r=r.slice(1,-1));for(var t=0,n=!1,a=!1,o={prim:"",args:[]},i="",s=0;s<r.length;s++)if(a)i+=r[s],a=!1;else if(s===r.length-1&&!1===n||" "===r[s]&&0===t&&!1===n){if(s===r.length-1&&(i+=r[s]),i){if(i===parseInt(i,10).toString()){if(!o.prim)return{int:i};o.args.push({int:i})}else if("0"===i[0]){if(!o.prim)return{bytes:i};o.args.push({bytes:i})}else o.prim?o.args.push(e(i)):o.prim=i;i=""}}else if('"'===r[s]&&n){if(n=!1,!o.prim)return{string:i};o.args.push({string:i}),i=""}else'"'!==r[s]||n||0!==t?("\\"===r[s]?a=!0:"("===r[s]?t++:")"===r[s]&&t--,i+=r[s]):n=!0;return o},mic2arr:function e(r){var t=[];if(Object.prototype.hasOwnProperty.call(r,"prim"))"Pair"===r.prim?(t.push(e(r.args[0])),t=t.concat(e(r.args[1]))):"Elt"===r.prim?t={key:e(r.args[0]),val:e(r.args[1])}:"True"===r.prim?t=!0:"False"===r.prim&&(t=!1);else if(Array.isArray(r))for(var n=r.length,a=0;a<n;a++){var o=e(r[a]);void 0!==o.key?(Array.isArray(t)&&(t={keys:[],vals:[]}),t.keys.push(o.key),t.vals.push(o.val)):t.push(o)}else t=Object.prototype.hasOwnProperty.call(r,"string")?r.string:Object.prototype.hasOwnProperty.call(r,"int")?parseInt(r.int,10):r;return t},ml2mic:function e(r){for(var t=[],n=!1,a="",o="",i=0,s=0,c=!1,u=!1,p=0;p<r.length;p++){if("}"!==o&&";"!==o||(o=""),n){if("}"===r[p]?s--:"{"===r[p]&&s++,0===s){var f=e(o);t.push({prim:a.trim(),args:[f]}),o="",s=0,n=!1}}else{if("{"===r[p]){s++,a=o,o="",n=!0;continue}if(u){o+=r[p],u=!1;continue}if(p===r.length-1&&!1===c||";"===r[p]&&0===i&&!1===c){if(p===r.length-1&&(o+=r[p]),""===o.trim()||"}"===o.trim()||";"===o.trim()){o="";continue}t.push(q.sexp2mic(o)),o="";continue}'"'===r[p]&&c?c=!1:'"'!==r[p]||c?"\\"===r[p]?u=!0:"("===r[p]?i++:")"===r[p]&&i--:c=!0}o+=r[p]}return t}};q.ml2tzjson=q.sexp2mic,q.tzjson2arr=q.mic2arr,q.mlraw2json=q.ml2mic,q.mintotz=q.totez,q.tztomin=q.mutez;var F,N=q,j={tz1:new Uint8Array([6,161,159]),tz2:new Uint8Array([6,161,161]),tz3:new Uint8Array([6,161,164]),KT:new Uint8Array([2,90,121]),edpk:new Uint8Array([13,15,37,217]),edsk2:new Uint8Array([13,15,58,7]),spsk:new Uint8Array([17,162,224,201]),p2sk:new Uint8Array([16,81,238,189]),sppk:new Uint8Array([3,254,226,86]),p2pk:new Uint8Array([3,178,139,127]),edesk:new Uint8Array([7,90,60,179,41]),edsk:new Uint8Array([43,246,78,7]),edsig:new Uint8Array([9,245,205,134,18]),spsig1:new Uint8Array([13,115,101,19,63]),p2sig:new Uint8Array([54,240,44,52]),sig:new Uint8Array([4,130,43]),Net:new Uint8Array([87,82,0]),nce:new Uint8Array([69,220,169]),b:new Uint8Array([1,52]),o:new Uint8Array([5,116]),Lo:new Uint8Array([133,233]),LLo:new Uint8Array([29,159,109]),P:new Uint8Array([2,170]),Co:new Uint8Array([79,179]),id:new Uint8Array([153,103]),TZ:new Uint8Array([2,90,121])},M={block:new Uint8Array([1]),endorsement:new Uint8Array([2]),generic:new Uint8Array([3])},K={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0A":"True","0B":"Unit","0C":"PACK","0D":"UNPACK","0E":"BLAKE2B","0F":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1A":"CONCAT","1B":"CONS","1C":"CREATE_ACCOUNT","1D":"CREATE_CONTRACT","1E":"IMPLICIT_ACCOUNT","1F":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2A":"GT","2B":"HASH_KEY","2C":"IF","2D":"IF_CONS","2E":"IF_LEFT","2F":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3A":"MUL","3B":"NEG","3C":"NEQ","3D":"NIL","3E":"NONE","3F":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4A":"STEPS_TO_QUOTA","4B":"SUB","4C":"SWAP","4D":"TRANSFER_TOKENS","4E":"SET_DELEGATE","4F":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5A":"contract","5B":"int","5C":"key","5D":"key_hash","5E":"lambda","5F":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6A":"mutez","6B":"timestamp","6C":"unit","6D":"operation","6E":"address","6F":"SLICE"},z=(F={},Object.keys(K).forEach(function(e){F[K[e]]=e}),F),R={opMapping:K,opMappingReverse:z,primMapping:{"00":"int","01":"string","02":"seq","03":{name:"prim",len:0,annots:!1},"04":{name:"prim",len:0,annots:!0},"05":{name:"prim",len:1,annots:!1},"06":{name:"prim",len:1,annots:!0},"07":{name:"prim",len:2,annots:!1},"08":{name:"prim",len:2,annots:!0},"09":{name:"prim",len:3,annots:!0},"0A":"bytes"},primMappingReverse:{0:{false:"03",true:"04"},1:{false:"05",true:"06"},2:{false:"07",true:"08"},3:{true:"09"}},forgeOpTags:{endorsement:0,seed_nonce_revelation:1,double_endorsement_evidence:2,double_baking_evidence:3,activate_account:4,proposals:5,ballot:6,reveal:7,transaction:8,origination:9,delegation:10}},D={toBytesInt32:function(e){return e=parseInt(e,10),new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]).buffer},toBytesInt32Hex:function(e){return N.buf2hex(D.toBytesInt32(e))},bool:function(e){return e?"ff":"00"},script:function(e){var r=D.encodeRawBytes(e.code).toLowerCase(),t=D.encodeRawBytes(e.storage).toLowerCase();return D.toBytesInt32Hex(r.length/2)+r+D.toBytesInt32Hex(t.length/2)+t},parameters:function(e){var r=D.encodeRawBytes(e).toLowerCase();return D.toBytesInt32Hex(r.length/2)+r},publicKeyHash:function(e){var r,t=parseInt(e.substr(2,1),10);return r="0".concat((t-1).toString()),r+=N.buf2hex(N.b58cdecode(e,j[e.substr(0,3)]))},address:function(e){var r;return"K"===e.substr(0,1)?(r="01",r+=N.buf2hex(N.b58cdecode(e,j.KT)),r+="00"):(r="00",r+=D.publicKeyHash(e)),r},zarith:function(e){var r="",t=parseInt(e,10);if(Number.isNaN(t))throw new TypeError("Error forging zarith ".concat(e));for(;;){if(t<128){t<16&&(r+="0"),r+=t.toString(16);break}var n=t%128;t-=n,t/=128,r+=(n+=128).toString(16)}return r},publicKey:function(e){var r="";switch(e.substr(0,2)){case"ed":r="00";break;case"sp":r="01";break;case"p2":r="02"}return r+=N.buf2hex(N.b58cdecode(e,j[e.substr(0,4)]))},op:function(e){var r="";switch(r=N.buf2hex(new Uint8Array([R.forgeOpTags[e.kind]])),R.forgeOpTags[e.kind]){case 0:case 1:if(r+=N.buf2hex(D.toBytesInt32(e.level)),0===R.forgeOpTags[e.kind])break;if(r+=e.nonce,1===R.forgeOpTags[e.kind])break;case 2:case 3:throw new Error("Double bake and double endorse forging is not complete");case 4:if(r+=N.buf2hex(N.b58cdecode(e.pkh,j.tz1)),r+=e.secret,4===R.forgeOpTags[e.kind])break;case 5:case 6:if(r+=D.publicKeyHash(e.source),r+=N.buf2hex(D.toBytesInt32(e.period)),5===R.forgeOpTags[e.kind])throw new Error("Proposal forging is not complete");if(6===R.forgeOpTags[e.kind]){r+=N.buf2hex(N.b58cdecode(e.proposal,j.P)),r+="yay"===e.ballot?"00":"nay"===e.ballot?"01":"02";break}case 7:case 8:case 9:case 10:r+=D.address(e.source),r+=D.zarith(e.fee),r+=D.zarith(e.counter),r+=D.zarith(e.gas_limit),r+=D.zarith(e.storage_limit),7===R.forgeOpTags[e.kind]?r+=D.publicKey(e.public_key):8===R.forgeOpTags[e.kind]?(r+=D.zarith(e.amount),r+=D.address(e.destination),void 0!==e.parameters&&e.parameters?(r+=D.bool(!0),r+=D.parameters(e.parameters)):r+=D.bool(!1)):9===R.forgeOpTags[e.kind]?(r+=D.publicKeyHash(e.manager_pubkey||e.managerPubkey),r+=D.zarith(e.balance),r+=D.bool(e.spendable),r+=D.bool(e.delegatable),void 0!==e.delegate&&e.delegate?(r+=D.bool(!0),r+=D.publicKeyHash(e.delegate)):r+=D.bool(!1),void 0!==e.script&&e.script?(r+=D.bool(!0),r+=D.script(e.script)):r+=D.bool(!1)):10===R.forgeOpTags[e.kind]&&(void 0!==e.delegate&&e.delegate?(r+=D.bool(!0),r+=D.publicKeyHash(e.delegate)):r+=D.bool(!1))}return r}};D.forge=function(){var e=d()(c.a.mark(function e(r,t,n){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.buf2hex(N.b58cdecode(t.branch,j.b)),t.contents.forEach(function(e){a+=D.op(e)}),e.abrupt("return",{opbytes:a,opOb:t,counter:n});case 3:case"end":return e.stop()}},e)}));return function(r,t,n){return e.apply(this,arguments)}}(),D.decodeRawBytes=function(e){e=e.toUpperCase();var r=0,t=function(t){return e.slice(r,r+t)};return function e(){var n=t(2),a=R.primMapping[n];if(a instanceof Object){r+=2;var o=R.opMapping[t(2)];r+=2;var s={prim:o,args:i()(Array(a.len)).map(function(){return e()}),annots:void 0};if(a.len||delete s.args,a.annots){var c=2*parseInt(t(8),16);r+=8;var u=t(c).match(/[\dA-F]{2}/g);if(r+=c,u){var p=new Uint8Array(u.map(function(e){return parseInt(e,16)})),f=N.textDecode(p);s.annots=f.split(" ")}}else delete s.annots;return s}if("0A"===n){r+=2;var d=t(8);r+=8;var l=2*parseInt(d,16),h=t(l);return r+=l,{bytes:h}}if("01"===n){r+=2;var g=t(8);r+=8;var v=2*parseInt(g,16),b=t(v);r+=v;var y=b.match(/[\dA-F]{2}/g);if(y instanceof Array){var m=new Uint8Array(y.map(function(e){return parseInt(e,16)}));return{string:N.textDecode(m)}}throw new Error("Input bytes error")}if("00"===n){r+=2;var k=parseInt(t(2),16).toString(2).padStart(8,"0");r+=2;for(var w=[k.slice(2)],x="1"===k[0];x;){var _=parseInt(t(2),16).toString(2).padStart(8,"0");r+=2,w.push(_.slice(1)),x="1"===_[0]}return{int:new I.BigNumber(w.reverse().join(""),2).toString()}}if("02"===n){r+=2;var A=t(8);r+=8;for(var E=2*parseInt(A,16),O=r+E,T=[];O>r;)T.push(e());return T}throw new Error("Invalid raw bytes: Byte:".concat(n," Index:").concat(r))}()},D.encodeRawBytes=function(e){return function e(r){var t=[];if(r instanceof Array){t.push("02");var n=r.map(function(r){return e(r)}).join(""),a=n.length/2;t.push(a.toString(16).padStart(8,"0")),t.push(n)}else if(r instanceof Object)if(r.prim){var o=r.args?r.args.length:0;if(t.push(R.primMappingReverse[o][!!r.annots]),t.push(R.opMappingReverse[r.prim]),r.args&&r.args.forEach(function(r){return t.push(e(r))}),r.annots){var i=r.annots.map(function(e){return N.buf2hex(N.textEncode(e))}).join("20");t.push((i.length/2).toString(16).padStart(8,"0")),t.push(i)}}else if(r.bytes){var s=r.bytes.length/2;t.push("0A"),t.push(s.toString(16).padStart(8,"0")),t.push(r.bytes)}else if(r.int){var c,u=new I.BigNumber(r.int,10),p="-"===u.toString(2)[0]?"1":"0",f=u.toString(2).replace("-","");c=f.length<=6?6:(f.length-6)%7?(f.length+7-(f.length-6))%7:f.length;var d=f.padStart(c,"0").match(/\d{6,7}/g).reverse();d[0]=p+d[0];var l=d.map(function(e,r){return parseInt((r===d.length-1?"0":"1")+e,2).toString(16).padStart(2,"0")}).join("");t.push("00"),t.push(l)}else if(r.string){var h=N.textEncode(r.string),g=[].slice.call(h).map(function(e){return e.toString(16).padStart(2,"0")}).join(""),v=h.length;t.push("01"),t.push(v.toString(16).padStart(8,"0")),t.push(g)}return t.join("")}(e).toUpperCase()};var H=D,G=t(20).default,Q=t(21).default,W={};W.getAddress=d()(c.a.mark(function e(){var r,t,n,a,o,i,s,u,p,f,d=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>0&&void 0!==d[0]?d[0]:{},t=r.path,n=void 0===t?"44'/1729'/0'/0'":t,a=r.displayConfirm,o=void 0!==a&&a,i=r.curve,s=void 0===i?0:i,e.next=3,G.create();case 3:return u=e.sent,p=new Q(u),e.prev=5,e.next=8,p.getAddress(n,o,s);case 8:f=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),u.close(),e.abrupt("return",e.t0);case 15:return u.close(),e.abrupt("return",f);case 17:case"end":return e.stop()}},e,null,[[5,11]])})),W.signOperation=function(){var e=d()(c.a.mark(function e(r){var t,n,a,o,i,s,u,p,f;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.path,n=void 0===t?"44'/1729'/0'/0'":t,a=r.rawTxHex,o=r.curve,i=void 0===o?0:o,e.next=3,G.create();case 3:return s=e.sent,u=new Q(s),e.prev=5,e.next=8,u.signOperation(n,"03".concat(a),i);case 8:f=e.sent,p=f.signature,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(5),s.close(),e.abrupt("return",e.t0);case 16:return s.close(),e.abrupt("return",p);case 18:case"end":return e.stop()}},e,null,[[5,12]])}));return function(r){return e.apply(this,arguments)}}(),W.getVersion=d()(c.a.mark(function e(){var r,t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.create();case 2:return r=e.sent,t=new Q(r),e.prev=4,e.next=7,t.getVersion();case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),r.close(),e.abrupt("return",e.t0);case 14:return r.close(),e.abrupt("return",n);case 16:case"end":return e.stop()}},e,null,[[4,10]])}));var J=W,V=t(12),Y=t(4),X=t.n(Y),Z=t(18),$=new(t.n(Z).a),ee={};ee.extractEncryptedKeys=function(){var e=d()(c.a.mark(function e(r,t){var n,a,o,i,s,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&t){e.next=3;break}return console.error("Invalid length for a key encoding"),e.abrupt("return",{sk:"",pk:"",pkh:""});case 3:return e.prev=3,e.next=6,X.a.ready;case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(3),new Error(e.t0);case 11:return n=X.a,a=N.b58cdecode(r,j.edesk),o=a.slice(0,8),i=a.slice(8),e.next=17,$.subtle.importKey("raw",N.textEncode(t),{name:"PBKDF2"},!1,["deriveBits"]);case 17:return s=e.sent,s=$.subtle.deriveBits({name:"PBKDF2",salt:o,iterations:32768,hash:{name:"SHA-512"}},s,256),u=n.crypto_sign_seed_keypair(n.crypto_secretbox_open_easy(i,new Uint8Array(24),new Uint8Array(s))),e.abrupt("return",{sk:N.b58cencode(u.privateKey,j.edsk),pk:N.b58cencode(u.publicKey,j.edpk),pkh:N.b58cencode(n.crypto_generichash(20,u.publicKey),j.tz1)});case 21:case"end":return e.stop()}},e,null,[[3,8]])}));return function(r,t){return e.apply(this,arguments)}}(),ee.extractKeys=function(){var e=d()(c.a.mark(function e(r){var t,n,a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.ready;case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:if(t=X.a,n=r.substr(0,2),[54,55,88,98].includes(r.length)){e.next=12;break}throw new Error("Invalid length for a key encoding");case 12:if("ed"!==n){e.next=19;break}if(98!==r.length){e.next=15;break}return e.abrupt("return",{sk:r,pk:N.b58cencode(N.b58cdecode(r,j.edsk).slice(32),j.edpk),pkh:N.b58cencode(t.crypto_generichash(20,N.b58cdecode(r,j.edsk).slice(32)),j.tz1)});case 15:if(54!==r.length){e.next=19;break}return a=N.b58cdecode(r,j.edsk2),o=t.crypto_sign_seed_keypair(a),e.abrupt("return",{sk:N.b58cencode(o.privateKey,j.edsk),pk:N.b58cencode(o.publicKey,j.edpk),pkh:N.b58cencode(t.crypto_generichash(20,o.publicKey),j.tz1)});case 19:return console.error("Invalid prefix for a key encoding"),e.abrupt("return",{sk:"",pk:"",pkh:""});case 21:case"end":return e.stop()}},e,null,[[0,5]])}));return function(r){return e.apply(this,arguments)}}(),ee.generateMnemonic=function(){return Object(V.generateMnemonic)(160)},ee.checkAddress=function(e){try{return N.b58cdecode(e,j.tz1),!0}catch(e){return!1}},ee.generateKeys=function(){var e=d()(c.a.mark(function e(r,t){var n,a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.ready;case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:return n=X.a,e.next=11,Object(V.mnemonicToSeed)(r,t).then(function(e){return e.slice(0,32)});case 11:return a=e.sent,o=n.crypto_sign_seed_keypair(a),e.abrupt("return",{mnemonic:r,passphrase:t,sk:N.b58cencode(o.privateKey,j.edsk),pk:N.b58cencode(o.publicKey,j.edpk),pkh:N.b58cencode(n.crypto_generichash(20,o.publicKey),j.tz1)});case 14:case"end":return e.stop()}},e,null,[[0,5]])}));return function(r,t){return e.apply(this,arguments)}}(),ee.sign=function(){var e=d()(c.a.mark(function e(r,t,n){var a,o,i,s,u,p;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.ready;case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:if(a=X.a,54!==t.length){e.next=20;break}return e.prev=10,e.next=13,ee.extractKeys(t);case 13:o=e.sent,t=o.sk,e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(10),new Error(e.t1);case 20:return i=N.hex2buf(r),void 0!==n&&(i=N.mergebuf(n,i)),s=a.crypto_sign_detached(a.crypto_generichash(32,i),N.b58cdecode(t,j.edsk),"uint8array"),u=N.b58cencode(s,j.edsig),p=r+N.buf2hex(s),e.abrupt("return",{bytes:r,sig:s,edsig:u,sbytes:p});case 26:case"end":return e.stop()}},e,null,[[0,5],[10,17]])}));return function(r,t,n){return e.apply(this,arguments)}}(),ee.verify=function(){var e=d()(c.a.mark(function e(r,t,n){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.ready;case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:return a=X.a,e.abrupt("return",a.crypto_sign_verify_detached(t,N.hex2buf(r),N.b58cdecode(n,j.edpk)));case 10:case"end":return e.stop()}},e,null,[[0,5]])}));return function(r,t,n){return e.apply(this,arguments)}}();var re=ee,te=function(e){function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://127.0.0.1:8732",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return h()(this,r),e=y()(this,x()(r).call(this,t,n,o,s)),S()(k()(e),"_localForge",void 0),S()(k()(e),"_validateLocalForge",void 0),S()(k()(e),"_counters",void 0),S()(k()(e),"_debugMode",void 0),S()(k()(e),"query",function(r,t,n){return void 0===t?void 0===n?n="GET":t={}:void 0===n&&(n="POST"),new Promise(function(a,o){try{var i=new P.a;i.open(n,e.provider+r,!0),i.onload=function(){if(e._debugMode&&console.log("Node call",r,t),200===i.status)if(i.responseText){var n=JSON.parse(i.responseText);e._debugMode&&console.log("Node response",r,t,n),void 0!==n.error?o(n.error):(void 0!==n.ok&&(n=n.ok),a(n))}else o("Empty response returned");else i.responseText?o(i.responseText):o(i.statusText)},i.onerror=function(){o(i.statusText)},"POST"===n?(i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(t))):i.send()}catch(e){o(e)}})}),S()(k()(e),"account",function(){var r=d()(c.a.mark(function r(t){var n,a,o,i,s,u,f,d,l,h,g,v,b,y,m,k,w,x,_,A,E,O,T,B,P=arguments;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.keys,a=t.balance,o=t.spendable,i=t.delegatable,s=t.delegate,u=t.fee,f=void 0===u?e.defaultFee:u,d=t.gasLimit,l=void 0===d?1e4:d,h=t.storageLimit,g=void 0===h?257:h,v=P.length>1&&void 0!==P[1]?P[1]:{},b=v.useLedger,y=void 0!==b&&b,m=v.path,k=void 0===m?"44'/1729'/0'/0'":m,w=v.curve,x=void 0===w?0:w,_="",n&&n.pkh&&(_=n.pkh),!y){r.next=10;break}return r.next=7,J.getAddress({path:k,curve:x});case 7:A=r.sent,E=A.address,_=E;case 10:return O={},void 0!==o&&(O.spendable=o),void 0!==i&&(O.delegatable=i),void 0!==s&&s&&(O.delegate=s),T="zero"===e.network?"manager_pubkey":"managerPubkey",B=[p()(S()({kind:"origination",balance:N.mutez(a),fee:f,gas_limit:l,storage_limit:g},T,_),O)],r.abrupt("return",e.sendOperation({from:_,operation:B,keys:n},{useLedger:y,path:k,curve:x}));case 17:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()),S()(k()(e),"getBalance",function(r){return e.query("/chains/".concat(e.chain,"/blocks/head/context/contracts/").concat(r,"/balance"))}),S()(k()(e),"getDelegate",function(r){return e.query("/chains/".concat(e.chain,"/blocks/head/context/contracts/").concat(r,"/delegate")).then(function(e){return e||!1})}),S()(k()(e),"getManager",function(r){return e.query("/chains/".concat(e.chain,"/blocks/head/context/contracts/").concat(r,"/manager_key"))}),S()(k()(e),"getCounter",function(r){return e.query("/chains/".concat(e.chain,"/blocks/head/context/contracts/").concat(r,"/counter"))}),S()(k()(e),"getBaker",function(r){return e.query("/chains/".concat(e.chain,"/blocks/head/context/delegates/").concat(r))}),S()(k()(e),"getHeader",function(){return e.query("/chains/".concat(e.chain,"/blocks/head/header"))}),S()(k()(e),"getHead",function(){return e.query("/chains/".concat(e.chain,"/blocks/head"))}),S()(k()(e),"getHeadHash",function(){return e.query("/chains/".concat(e.chain,"/blocks/head/hash"))}),S()(k()(e),"getBallotList",function(){return e.query("/chains/".concat(e.chain,"/blocks/head/votes/ballot_list"))}),S()(k()(e),"getProposals",function(){return e.query("/chains/".concat(e.chain,"/blocks/head/votes/proposals"))}),S()(k()(e),"getBallots",function(){return e.query("/chains/".concat(e.chain,"/blocks/head/votes/ballots"))}),S()(k()(e),"getListings",function(){return e.query("/chains/".concat(e.chain,"/blocks/head/votes/listings"))}),S()(k()(e),"getCurrentProposal",function(){return e.query("/chains/".concat(e.chain,"/blocks/head/votes/current_proposal"))}),S()(k()(e),"getCurrentPeriod",function(){return e.query("/chains/".concat(e.chain,"/blocks/head/votes/current_period_kind"))}),S()(k()(e),"getCurrentQuorum",function(){return e.query("/chains/".concat(e.chain,"/blocks/head/votes/current_quorum"))}),S()(k()(e),"awaitOperation",function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:180;if(n<=0)throw new Error("Timeout must be more than 0");if(t<=0)throw new Error("Interval must be more than 0");var a=Math.ceil(n/t)+1,o=0,i=!1,s=function(e){e.hash===r&&(i=!0)};return new Promise(function(r,n){!function c(){return e.getHead().then(function(e){o++;for(var u=3;u>=0;u--)e.operations[u].forEach(s);i?r(e.hash):o>=a?n(new Error("Timeout")):setTimeout(c,1e3*t)})}()})}),S()(k()(e),"call",function(r,t){return e.query(r,t)}),S()(k()(e),"prepareOperation",function(r){var t,n,o=r.from,s=r.operation,u=r.keys,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=f.useLedger,h=void 0!==l&&l,g=f.path,v=void 0===g?"44'/1729'/0'/0'":g,b=f.curve,y=void 0===b?0:b,m={},k=[],w=!1,x=[];k.push(e.getHeader()),x=Array.isArray(s)?i()(s):[s];for(var _=0;_<x.length;_++)if(["transaction","origination","delegation"].includes(x[_].kind)){w=!0,k.push(e.getCounter(o)),k.push(e.getManager(o));break}return Promise.all(k).then(function(){var r=d()(c.a.mark(function r(i){var s,f,d,l,g,b,k,_,A,E;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=a()(i,3),f=s[0],d=s[1],l=s[2],n=f,!w||!u&&!h||void 0!==l.key){r.next=11;break}if(g=u&&u.pk,!h){r.next=9;break}return r.next=7,J.getAddress({path:v,curve:y});case 7:b=r.sent,g=b.publicKey;case 9:k={kind:"reveal",fee:"zero"===e.network?1e5:1269,public_key:g,source:o,gas_limit:1e4,storage_limit:0},x.unshift(k);case 11:if(t=parseInt(d,10),(!e._counters[o]||e._counters[o]<t)&&(e._counters[o]=t),_=function(r){return r.map(function(r){var t=p()({},r);return["proposals","ballot","transaction","origination","delegation"].includes(r.kind)&&void 0===r.source&&(t.source=o),["reveal","transaction","origination","delegation"].includes(r.kind)&&(void 0===r.fee?t.fee="0":t.fee="".concat(r.fee),void 0===r.gas_limit?t.gas_limit="0":t.gas_limit="".concat(r.gas_limit),void 0===r.storage_limit?t.storage_limit="0":t.storage_limit="".concat(r.storage_limit),void 0!==r.balance&&(t.balance="".concat(t.balance)),void 0!==r.amount&&(t.amount="".concat(t.amount)),t.counter="".concat(++e._counters[o])),JSON.stringify(t)}).map(function(e){return JSON.parse(e)})},m.branch=n.hash,m.contents=_(x),A="",e._localForge&&!e._validateLocalForge){r.next=21;break}return r.next=20,e.query("/chains/".concat(e.chain,"/blocks/").concat(n.hash,"/helpers/forge/operations"),m);case 20:A=r.sent;case 21:if(m.protocol=n.protocol,e._localForge){r.next=24;break}return r.abrupt("return",{opbytes:A,opOb:m,counter:t});case 24:return r.next=26,H.forge(n,m,t);case 26:if(E=r.sent,!e._validateLocalForge){r.next=31;break}if(E.opbytes!==A){r.next=30;break}return r.abrupt("return",E);case 30:throw new Error("Forge validation error - local and remote bytes don't match");case 31:return r.abrupt("return",p()({},E,{counter:t}));case 32:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}())}),S()(k()(e),"simulateOperation",function(r){var t=r.from,n=r.operation,a=r.keys,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.useLedger,s=void 0!==i&&i,c=o.path,u=void 0===c?"44'/1729'/0'/0'":c,p=o.curve,f=void 0===p?0:p;return e.prepareOperation({from:t,operation:n,keys:a},{useLedger:s,path:u,curve:f}).then(function(r){return e.query("/chains/".concat(e.chain,"/blocks/head/helpers/scripts/run_operation"),r.opOb)})}),S()(k()(e),"sendOperation",function(){var r=d()(c.a.mark(function r(t){var n,a,o,i,s,u,p,f,d,l,h,g,v,b,y,m=arguments;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.from,a=t.operation,o=t.keys,i=t.skipPrevalidation,s=void 0!==i&&i,u=m.length>1&&void 0!==m[1]?m[1]:{},p=u.useLedger,f=void 0!==p&&p,d=u.path,l=void 0===d?"44'/1729'/0'/0'":d,h=u.curve,g=void 0===h?0:h,r.next=4,e.prepareOperation({from:n,operation:a,keys:o},{useLedger:f,path:l,curve:g});case 4:if(v=r.sent,!f){r.next=12;break}return r.next=8,J.signOperation({path:l,rawTxHex:v.opbytes,curve:g});case 8:b=r.sent,v.opbytes+=b,r.next=22;break;case 12:if(o){r.next=17;break}v.opbytes+="00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",v.opOb.signature="edsigtXomBKi5CTRf5cjATJWSyaRvhfYNHqSUGrn4SdbYRcGwQrUGjzEfQDTuqHhuA8b2d8NarZjz8TRf65WkpQmo423BtomS8Q",r.next=22;break;case 17:return r.next=19,re.sign(v.opbytes,o.sk,M.generic);case 19:y=r.sent,v.opbytes=y.sbytes,v.opOb.signature=y.edsig;case 22:if(!s&&!f){r.next=24;break}return r.abrupt("return",e.silentInject(v.opbytes).catch(function(r){throw e._counters[n]=v.counter,r}));case 24:return r.abrupt("return",e.inject(v.opOb,v.opbytes).catch(function(r){throw e._counters[n]=v.counter,r}));case 25:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()),S()(k()(e),"inject",function(r,t){var n=[],a=[];return e.query("/chains/".concat(e.chain,"/blocks/head/helpers/preapply/operations"),[r]).then(function(r){if(!Array.isArray(r))throw new Error({error:"RPC Fail",errors:[]});for(var o=0;o<r.length;o++)for(var i=0;i<r[o].contents.length;i++)n.push(r[o].contents[i]),void 0!==r[o].contents[i].metadata.operation_result&&"failed"===r[o].contents[i].metadata.operation_result.status&&(a=a.concat(r[o].contents[i].metadata.operation_result.errors));if(a.length)throw new Error({error:"Operation Failed",errors:a});return e.query("/injection/operation",t)}).then(function(e){return{hash:e,operations:n}})}),S()(k()(e),"silentInject",function(r){return e.query("/injection/operation",r).then(function(e){return{hash:e}})}),S()(k()(e),"transfer",function(r){var t=r.from,n=r.keys,a=r.to,o=r.amount,i=r.parameter,s=r.fee,c=void 0===s?e.defaultFee:s,u=r.gasLimit,p=void 0===u?10100:u,f=r.storageLimit,d=void 0===f?0:f,l=r.mutez,h=void 0!==l&&l,g=r.rawParam,v=void 0!==g&&g,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=b.useLedger,m=void 0!==y&&y,k=b.path,w=void 0===k?"44'/1729'/0'/0'":k,x=b.curve,_=void 0===x?0:x,A={kind:"transaction",fee:c,gas_limit:p,storage_limit:d,amount:h?N.mutez(o):o,destination:a};return i&&(A.parameters=v?i:N.sexp2mic(i)),e.sendOperation({from:t,operation:[A],keys:n},{useLedger:m,path:w,curve:_})}),S()(k()(e),"activate",function(r,t){var n={kind:"activate_account",pkh:r,secret:t};return e.sendOperation({from:r,operation:[n]},{useLedger:!1})}),S()(k()(e),"originate",function(){var r=d()(c.a.mark(function r(t){var n,a,o,i,s,u,p,f,d,l,h,g,v,b,y,m,k,w,x,_,A,E,O,T,B,P,L,I,U,C=arguments;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.keys,a=t.balance,o=t.code,i=t.init,s=t.spendable,u=void 0!==s&&s,p=t.delegatable,f=void 0!==p&&p,d=t.delegate,l=t.fee,h=void 0===l?e.defaultFee:l,g=t.gasLimit,v=void 0===g?1e4:g,b=t.storageLimit,y=void 0===b?257:b,m=C.length>1&&void 0!==C[1]?C[1]:{},k=m.useLedger,w=void 0!==k&&k,x=m.path,_=void 0===x?"44'/1729'/0'/0'":x,A=m.curve,E=void 0===A?0:A,O=N.ml2mic(o),T={code:O,storage:N.sexp2mic(i)},B=n&&n.pkh,!w){r.next=11;break}return r.next=8,J.getAddress({path:_,curve:E});case 8:P=r.sent,L=P.address,B=L;case 11:return I="zero"===e.network?"manager_pubkey":"managerPubkey",U=S()({kind:"origination",fee:h,gas_limit:v,storage_limit:y,balance:N.mutez(a),spendable:u,delegatable:f,delegate:void 0!==d&&d?d:B,script:T},I,B),r.abrupt("return",e.sendOperation({from:B,operation:[U],keys:n},{useLedger:w,path:_,curve:E}));case 14:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()),S()(k()(e),"setDelegate",function(){var r=d()(c.a.mark(function r(t){var n,a,o,i,s,u,p,f,d,l,h,g,v,b,y,m,k,w,x,_,A=arguments;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.from,a=t.keys,o=t.delegate,i=t.fee,s=void 0===i?e.defaultFee:i,u=t.gasLimit,p=void 0===u?1e4:u,f=t.storageLimit,d=void 0===f?0:f,l=A.length>1&&void 0!==A[1]?A[1]:{},h=l.useLedger,g=void 0!==h&&h,v=l.path,b=void 0===v?"44'/1729'/0'/0'":v,y=l.curve,m=void 0===y?0:y,k=a&&a.pkh,!g){r.next=9;break}return r.next=6,J.getAddress({path:b,curve:m});case 6:w=r.sent,x=w.address,k=x;case 9:return _={kind:"delegation",fee:s,gas_limit:p,storage_limit:d,delegate:void 0!==o?o:k},r.abrupt("return",e.sendOperation({from:n,operation:[_],keys:a},{useLedger:g,path:b,curve:m}));case 11:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()),S()(k()(e),"registerDelegate",function(){var r=d()(c.a.mark(function r(t){var n,a,o,i,s,u,p,f,d,l,h,g,v,b,y,m,k,w,x=arguments;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.keys,a=t.fee,o=void 0===a?e.defaultFee:a,i=t.gasLimit,s=void 0===i?1e4:i,u=t.storageLimit,p=void 0===u?0:u,f=x.length>1&&void 0!==x[1]?x[1]:{},d=f.useLedger,l=void 0!==d&&d,h=f.path,g=void 0===h?"44'/1729'/0'/0'":h,v=f.curve,b=void 0===v?0:v,y=n&&n.pkh,!l){r.next=9;break}return r.next=6,J.getAddress({path:g,curve:b});case 6:m=r.sent,k=m.address,y=k;case 9:return w={kind:"delegation",fee:o,gas_limit:s,storage_limit:p,delegate:y},r.abrupt("return",e.sendOperation({from:y,operation:[w],keys:n},{useLedger:l,path:g,curve:b}));case 11:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()),S()(k()(e),"typecheckCode",function(r){var t=N.ml2mic(r);return e.query("/chains/".concat(e.chain,"/blocks/head/helpers/scripts/typecheck_code"),{program:t,gas:"10000"})}),S()(k()(e),"packData",function(r,t){var n={data:N.sexp2mic(r),type:N.sexp2mic(t),gas:"4000000"};return e.query("/chains/".concat(e.chain,"/blocks/head/helpers/scripts/pack_data"),n)}),S()(k()(e),"typecheckData",function(r,t){var n={data:N.sexp2mic(r),type:N.sexp2mic(t),gas:"4000000"};return e.query("/chains/".concat(e.chain,"/blocks/head/helpers/scripts/typecheck_data"),n)}),S()(k()(e),"runCode",function(r,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?"trace_code":"run_code";return e.query("/chains/".concat(e.chain,"/blocks/head/helpers/scripts/").concat(o),{script:N.ml2mic(r),amount:"".concat(N.mutez(t)),input:N.sexp2mic(n),storage:N.sexp2mic(a)})}),e._localForge=s.localForge||!0,e._validateLocalForge=s.validateLocalForge||!1,e._counters={},e._debugMode=s.debugMode||!1,e}return O()(r,e),v()(r,[{key:"setProvider",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.chain,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.network;A()(x()(r.prototype),"setProvider",this).call(this,e,t,n),this.provider=e,this.chain=t,this.network=n}},{key:"localForge",get:function(){return this._localForge},set:function(e){this._localForge=e}},{key:"validateLocalForge",get:function(){return this._validateLocalForge},set:function(e){this._validateLocalForge=e}},{key:"counters",get:function(){return this._counters},set:function(e){this._counters=e}},{key:"debugMode",get:function(){return this._debugMode},set:function(e){this._debugMode=e}}]),r}(L);t.d(r,"crypto",function(){return re}),t.d(r,"forge",function(){return H}),t.d(r,"utility",function(){return N}),t.d(r,"ledger",function(){return J}),t.d(r,"prefix",function(){return j}),t.d(r,"watermark",function(){return M}),t.d(r,"forgeMappings",function(){return R});r.default=te}])});