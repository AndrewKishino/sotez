<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## Sotez

**Extends AbstractTezModule**

Main Sotez Library

### Parameters

-   `provider`   (optional, default `'http://127.0.0.1:8732'`)
-   `chain`   (optional, default `'main'`)
-   `options`   (optional, default `{}`)

### Examples

```javascript
import Sotez from 'sotez';
const sotez = new Sotez('https://127.0.0.1:8732', 'main', { defaultFee: 1275 })
await sotez.importKey('edskRv6ZnkLQMVustbYHFPNsABu1Js6pEEWyMUFJQTqEZjVCU2WHh8ckcc7YA4uBzPiJjZCsv3pC1NDdV99AnyLzPjSip4uC3y');
sotez.transfer({
  to: 'tz1RvhdZ5pcjD19vCCK9PgZpnmErTba3dsBs',
  amount: '1000000',
});
```

### account

Originate a new account

#### Parameters

-   `paramObject` **[Object][1]** The parameters for the origination
    -   `paramObject.balance` **[number][2]** The amount in tez to transfer for the initial balance
    -   `paramObject.spendable` **[boolean][3]?** Whether the keyholder can spend the balance from the new account
    -   `paramObject.delegatable` **[boolean][3]?** Whether the new account is delegatable
    -   `paramObject.delegate` **[string][4]?** The delegate for the new account
    -   `paramObject.fee` **[number][2]** The fee to set for the transaction (optional, default `1420`)
    -   `paramObject.gasLimit` **[number][2]** The gas limit to set for the transaction (optional, default `10600`)
    -   `paramObject.storageLimit` **[number][2]** The storage limit to set for the transaction (optional, default `257`)

#### Examples

```javascript
sotez.account({
  balance: 10,
  spendable: true,
  delegatable: true,
  delegate: 'tz1fXdNLZ4jrkjtgJWMcfeNpFDK9mbCBsaV4',
}).then(res => console.log(res.operations[0].metadata.operation_result.originated_contracts[0]));
```

Returns **[Promise][5]** Object containing the injected operation hash

### activate

Activate an account

#### Parameters

-   `pkh` **[Object][1]** The public key hash of the account
-   `secret` **[string][4]** The secret to activate the account

#### Examples

```javascript
sotez.activate(pkh, secret)
  .then((activateOperation) => console.log(activateOperation));
```

Returns **[Promise][5]** Object containing the injected operation hash

### awaitOperation

Check for the inclusion of an operation in new blocks

#### Parameters

-   `hash` **[string][4]** The operation hash to check
-   `interval` **[number][2]** The interval to check new blocks (optional, default `10`)
-   `timeout` **[number][2]** The time before the operation times out (optional, default `180`)

#### Examples

```javascript
sotez.awaitOperation('ooYf5iK6EdTx3XfBusgDqS6znACTq5469D1zQSDFNrs5KdTuUGi')
 .then((hash) => console.log(hash));
```

Returns **[Promise][5]** The hash of the block in which the operation was included

### call

Get the current head block hash of the chain

#### Parameters

-   `path` **[string][4]** The path to query
-   `payload` **[Object][1]** The payload of the request

Returns **[Promise][5]** The response of the rpc call

### getBaker

Get the baker information for an address

#### Parameters

-   `address` **[string][4]** The contract for which to retrieve the baker information

#### Examples

```javascript
sotez.getBaker('tz1fXdNLZ4jrkjtgJWMcfeNpFDK9mbCBsaV4')
  .then(({
    balance,
    frozen_balance,
    frozen_balance_by_cycle,
    staking_balance,
    delegated_contracts,
    delegated_balance,
    deactivated,
    grace_period,
  }) => console.log(
    balance,
    frozen_balance,
    frozen_balance_by_cycle,
    staking_balance,
    delegated_contracts,
    delegated_balance,
    deactivated,
    grace_period,
  ));
```

Returns **[Promise][5]** The information of the delegate address

### getBalance

Get the balance for a contract

#### Parameters

-   `address` **[string][4]** The contract for which to retrieve the balance

#### Examples

```javascript
sotez.getBalance('tz1fXdNLZ4jrkjtgJWMcfeNpFDK9mbCBsaV4')
  .then(balance => console.log(balance));
```

Returns **[Promise][5]** The balance of the contract

### getBallotList

Ballots casted so far during a voting period

#### Examples

```javascript
sotez.getBallotList().then(ballotList => console.log(ballotList));
```

Returns **[Promise][5]** Ballots casted so far during a voting period

### getBallots

Sum of ballots casted so far during a voting period

#### Examples

```javascript
sotez.getBallots().then(({ yay, nay, pass }) => console.log(yay, nay, pass));
```

Returns **[Promise][5]** Sum of ballots casted so far during a voting period

### getCounter

Get the counter for an contract

#### Parameters

-   `address` **[string][4]** The contract for which to retrieve the counter

#### Examples

```javascript
sotez.getCounter('tz1fXdNLZ4jrkjtgJWMcfeNpFDK9mbCBsaV4')
  .then(counter => console.log(counter));
```

Returns **[Promise][5]** The counter of a contract, if any

### getCurrentPeriod

Current period kind

#### Examples

```javascript
sotez.getCurrentPeriod().then(currentPeriod => console.log(currentPeriod));
```

Returns **[Promise][5]** Current period kind

### getCurrentProposal

Current proposal under evaluation

#### Examples

```javascript
sotez.getCurrentProposal().then(currentProposal => console.log(currentProposal));
```

Returns **[Promise][5]** Current proposal under evaluation

### getCurrentQuorum

Current expected quorum

#### Examples

```javascript
sotez.getCurrentQuorum().then(currentQuorum => console.log(currentQuorum));
```

Returns **[Promise][5]** Current expected quorum

### getDelegate

Get the delegate for a contract

#### Parameters

-   `address` **[string][4]** The contract for which to retrieve the delegate

#### Examples

```javascript
sotez.getDelegate('tz1fXdNLZ4jrkjtgJWMcfeNpFDK9mbCBsaV4')
  .then(delegate => console.log(delegate));
```

Returns **[Promise][5]** The delegate of a contract, if any

### getHead

Get the current head block of the chain

#### Examples

```javascript
sotez.getHead().then(head => console.log(head));
```

Returns **[Promise][5]** The current head block

### getHeader

Get the header of the current head

#### Examples

```javascript
sotez.getHeader().then(header => console.log(header));
```

Returns **[Promise][5]** The whole block header

### getHeadHash

Get the current head block hash of the chain

#### Examples

```javascript
sotez.getHeadHash().then(headHash => console.log(headHash))
```

Returns **[Promise][5]** The block's hash, its unique identifier

### getHeadMetadata

Get the metadata of the current head

#### Examples

```javascript
sotez.getHeadMetadata().then(metadata => console.log(metadata));
```

Returns **[Promise][5]** The head block metadata

### getListings

List of delegates with their voting weight, in number of rolls

#### Examples

```javascript
sotez.getListings().then(listings => console.log(listings));
```

Returns **[Promise][5]** The ballots of the current voting period

### getManager

Get the manager for a contract

#### Parameters

-   `address` **[string][4]** The contract for which to retrieve the manager

#### Examples

```javascript
sotez.getManager('tz1fXdNLZ4jrkjtgJWMcfeNpFDK9mbCBsaV4')
  .then(({ manager, key }) => console.log(manager, key));
```

Returns **[Promise][5]** The manager of a contract

### getProposals

List of proposals with number of supporters

#### Examples

```javascript
sotez.getProposals().then(proposals => {
  console.log(proposals[0][0], proposals[0][1])
  console.log(proposals[1][0], proposals[1][1])
);
```

Returns **[Promise][5]** List of proposals with number of supporters

### importKey

Import a secret key

#### Parameters

-   `key` **[string][4]** The secret key
-   `passphrase` **[string][4]?** The passphrase of the encrypted key
-   `email` **[string][4]?** The email associated with the fundraiser account

#### Examples

```javascript
await sotez.importKey('edskRv6ZnkLQMVustbYHFPNsABu1Js6pEEWyMUFJQTqEZjVCU2WHh8ckcc7YA4uBzPiJjZCsv3pC1NDdV99AnyLzPjSip4uC3y')
```

### importLedger

Import a ledger public key

#### Parameters

-   `path` **[string][4]** The ledger path (optional, default `"44'/1729'/0'/0'"`)
-   `curve` **[number][2]** The curve parameter (optional, default `0x00`)

#### Examples

```javascript
await sotez.importLedger();
```

### inject

Inject an operation

#### Parameters

-   `opOb` **[Object][1]** The operation object
-   `sopbytes` **[string][4]** The signed operation bytes

Returns **[Promise][5]** Object containing the injected operation hash

### originate

Originate a new contract

#### Parameters

-   `paramObject` **[Object][1]** The parameters for the operation
    -   `paramObject.balance` **[number][2]** The amount in tez to transfer for the initial balance
    -   `paramObject.code` **([string][4] | Micheline)** The code to deploy for the contract
    -   `paramObject.init` **([string][4] | Micheline)** The initial storage of the contract
    -   `paramObject.spendable` **[boolean][3]** Whether the keyholder can spend the balance from the new account (optional, default `false`)
    -   `paramObject.delegatable` **[boolean][3]** Whether the new account is delegatable (optional, default `false`)
    -   `paramObject.delegate` **[string][4]?** The delegate for the new account
    -   `paramObject.fee` **[number][2]** The fee to set for the transaction (optional, default `1420`)
    -   `paramObject.gasLimit` **[number][2]** The gas limit to set for the transaction (optional, default `10600`)
    -   `paramObject.storageLimit` **[number][2]** The storage limit to set for the transaction (optional, default `257`)

Returns **[Promise][5]** Object containing the injected operation hash

### packData

Serializes a piece of data to a binary representation

#### Parameters

-   `data` **([string][4] | Micheline)** 
-   `type` **([string][4] | Micheline)** 

Returns **[Promise][5]** Serialized data

### prepareOperation

Prepares an operation

#### Parameters

-   `paramObject` **[Object][1]** The parameters for the operation
    -   `paramObject.operation` **([Object][1] \| [Array][6])** The operation to include in the transaction
    -   `paramObject.source`  

#### Examples

```javascript
sotez.prepareOperation({
  operation: {
    kind: 'transaction',
    fee: '1420',
    gas_limit: '10600',
    storage_limit: '300',
    amount: '1000',
    destination: 'tz1RvhdZ5pcjD19vCCK9PgZpnmErTba3dsBs',
  }
}).then(({ opbytes, opOb, counter }) => console.log(opbytes, opOb, counter));
```

Returns **[Promise][5]** Object containing the prepared operation

### query

Queries a node given a path and payload

#### Parameters

-   `path` **[string][4]** The RPC path to query
-   `payload` **[string][4]** The payload of the query
-   `method` **[string][4]** The request method. Either 'GET' or 'POST'

#### Examples

```javascript
sotez.query(`/chains/main/blocks/head`)
 .then(head => console.log(head));
```

Returns **[Promise][5]** The response of the query

### registerDelegate

Register an account as a delegate

#### Parameters

-   `paramObject` **[Object][1]** The parameters for the operation (optional, default `{}`)
    -   `paramObject.fee` **[number][2]** The fee to set for the transaction (optional, default `1420`)
    -   `paramObject.gasLimit` **[number][2]** The gas limit to set for the transaction (optional, default `10600`)
    -   `paramObject.storageLimit` **[number][2]** The storage limit to set for the transaction (optional, default `0`)

Returns **[Promise][5]** Object containing the injected operation hash

### runCode

Runs or traces code against an input and storage

#### Parameters

-   `code` **([string][4] | Micheline)** Code to run
-   `amount` **[number][2]** Amount in tez to send
-   `input` **([string][4] | Micheline)** Input to run though code
-   `storage` **([string][4] | Micheline)** State of storage
-   `trace` **[boolean][3]** Whether to trace (optional, default `false`)

Returns **[Promise][5]** Run results

### sendOperation

Send an operation

#### Parameters

-   `paramObject` **[Object][1]** The parameters for the operation
    -   `paramObject.operation` **([Object][1] \| [Array][6])** The operation to include in the transaction
    -   `paramObject.source` **[string][4]?** The source address of the operation
    -   `paramObject.skipPrevalidation` **[boolean][3]** Skip prevalidation before injecting operation (optional, default `false`)
    -   `paramObject.skipSignature` **[boolean][3]** Use default signature for specific transactions (optional, default `false`)

#### Examples

```javascript
const operation = {
  kind: 'transaction',
  fee: '1420',
  gas_limit: '10600',
  storage_limit: '300',
  amount: '1000',
  destination: 'tz1RvhdZ5pcjD19vCCK9PgZpnmErTba3dsBs',
};

sotez.sendOperation({ operation }).then(result => console.log(result));

sotez.sendOperation({ operation: [operation, operation] }).then(result => console.log(result));
```

Returns **[Promise][5]** Object containing the injected operation hash

### setDelegate

Set a delegate for an account

#### Parameters

-   `paramObject` **[Object][1]** The parameters for the operation
    -   `paramObject.delegate` **[string][4]?** The delegate for the new account
    -   `paramObject.fee` **[number][2]** The fee to set for the transaction (optional, default `1420`)
    -   `paramObject.gasLimit` **[number][2]** The gas limit to set for the transaction (optional, default `10600`)
    -   `paramObject.storageLimit` **[number][2]** The storage limit to set for the transaction (optional, default `0`)
    -   `paramObject.source`   (optional, default `this.key.publicKeyHash()`)

Returns **[Promise][5]** Object containing the injected operation hash

### silentInject

Inject an operation without prevalidation

#### Parameters

-   `sopbytes` **[string][4]** The signed operation bytes

Returns **[Promise][5]** Object containing the injected operation hash

### simulateOperation

Simulate an operation

#### Parameters

-   `paramObject` **[Object][1]** The parameters for the operation
    -   `paramObject.operation` **([Object][1] \| [Array][6])** The operation to include in the transaction
    -   `paramObject.source`  

#### Examples

```javascript
sotez.simulateOperation({
  operation: {
    kind: 'transaction',
    fee: '1420',
    gas_limit: '10600',
    storage_limit: '300',
    amount: '1000',
    destination: 'tz1RvhdZ5pcjD19vCCK9PgZpnmErTba3dsBs',
  },
}).then(result => console.log(result));
```

Returns **[Promise][5]** The simulated operation result

### transfer

Transfer operation

#### Parameters

-   `paramObject` **[Object][1]** The parameters for the operation
    -   `paramObject.to` **[string][4]** The address of the recipient
    -   `paramObject.amount` **[number][2]** The amount in tez to transfer for the initial balance
    -   `paramObject.source` **[string][4]?** The source address of the transfer
    -   `paramObject.fee` **[number][2]** The fee to set for the transaction (optional, default `1420`)
    -   `paramObject.parameters` **[string][4]?** The parameter for the transaction
    -   `paramObject.gasLimit` **[number][2]** The gas limit to set for the transaction (optional, default `10600`)
    -   `paramObject.storageLimit` **[number][2]** The storage limit to set for the transaction (optional, default `300`)
    -   `paramObject.mutez` **[number][2]** Whether the input amount is set to mutez (1/1,000,000 tez) (optional, default `false`)

#### Examples

```javascript
sotez.transfer({
  to: 'tz1RvhdZ5pcjD19vCCK9PgZpnmErTba3dsBs',
  amount: '1000000',
  fee: '1420',
}).then(result => console.log(result));
```

Returns **[Promise][5]** Object containing the injected operation hash

### typecheckCode

Typechecks the provided code

#### Parameters

-   `code` **([string][4] | Micheline)** The code to typecheck
-   `gas` **[number][2]** The the gas limit (optional, default `10000`)

Returns **[Promise][5]** Typecheck result

### typecheckData

Typechecks data against a type

#### Parameters

-   `data` **([string][4] | Micheline)** 
-   `type` **([string][4] | Micheline)** 

Returns **[Promise][5]** Typecheck result

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[6]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array
